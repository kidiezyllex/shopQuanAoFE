import{U as A,a as d,j as e,B as p,k as v,w as B,q as r,aQ as D,a6 as i}from"./index-Dpx_4rWJ.js";import{B as M,a as V,b as j,c as C,d as w,e as q}from"./breadcrumb-CJedQ5QG.js";import{C as L,a as O,b as Q,c as G,e as H}from"./card-fT6uSY2F.js";import{L as a}from"./label-B0XdI4bT.js";import{S as K,a as U,b as X,c as $,d as k}from"./select-CS4vNzI5.js";import{R as J,a as g}from"./radio-group-DsRvEBcz.js";import{b as W,E as S,a as P}from"./authentication-DEeDE_cb.js";import"./createLucideIcon-BdgKQErZ.js";import"./index-BdQq_4o_.js";import"./index-qvEK80KO.js";import"./check-CyKb8IHM.js";const Y={fullName:"",email:"",password:"",phoneNumber:"",role:"CUSTOMER",gender:"male",birthday:"",citizenId:""};function Z(){const o=A(),[s,N]=d.useState(Y),[f,I]=d.useState(""),h=W(),[m,F]=d.useState(!1),[x,T]=d.useState(!1),l=t=>{const{name:c,value:y}=t.target;N({...s,[c]:y})},b=(t,c)=>{N({...s,[t]:c})},z=()=>{F(!m)},R=()=>{T(!x)},E=async t=>{if(t.preventDefault(),!s.fullName||!s.email||!s.password||!s.phoneNumber){i.error("Vui lòng điền đầy đủ thông tin bắt buộc");return}if(s.password!==f){i.error("Mật khẩu xác nhận không khớp");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)){i.error("Email không hợp lệ");return}if(!/(84|0[3|5|7|8|9])+([0-9]{8})\b/.test(s.phoneNumber)){i.error("Số điện thoại không hợp lệ");return}try{await h.mutateAsync({...s,birthday:s.birthday?new Date(s.birthday):void 0,gender:s.gender},{onSuccess:()=>{i.success("Tạo tài khoản thành công"),o("/admin/accounts")},onError:n=>{let u="Không xác định";n.response&&n.response.data&&typeof n.response.data.message=="string"?u=n.response.data.message:n.message&&typeof n.message=="string"&&(u=n.message),i.error("Tạo tài khoản thất bại: "+u)}})}catch{i.error("Tạo tài khoản thất bại")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(M,{children:e.jsxs(V,{children:[e.jsx(j,{children:e.jsx(C,{href:"/admin/statistics",children:"Dashboard"})}),e.jsx(w,{}),e.jsx(j,{children:e.jsx(C,{href:"/admin/accounts",children:"Quản lý tài khoản"})}),e.jsx(w,{}),e.jsx(j,{children:e.jsx(q,{children:"Thêm tài khoản mới"})})]})}),e.jsxs(p,{variant:"outline",onClick:()=>o(-1),className:"flex items-center gap-2",children:[e.jsx(v.Icon,{path:B,size:.7}),"Quay lại"]})]}),e.jsx("form",{onSubmit:E,children:e.jsxs(L,{children:[e.jsx(O,{children:e.jsx(Q,{children:"Thông tin tài khoản"})}),e.jsx(G,{className:"space-y-4 text-maintext",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"fullName",children:["Họ và tên ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(r,{id:"fullName",name:"fullName",value:s.fullName,onChange:l,placeholder:"Nhập họ và tên",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"email",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(r,{id:"email",name:"email",type:"email",value:s.email,onChange:l,placeholder:"Nhập email",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"password",children:["Mật khẩu ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(r,{id:"password",name:"password",type:m?"text":"password",value:s.password,onChange:l,placeholder:"Nhập mật khẩu",required:!0,className:"pr-10"}),e.jsx("button",{type:"button",onClick:z,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-maintext hover:text-maintext focus:outline-none",children:m?e.jsx(S,{size:16}):e.jsx(P,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"confirmPassword",children:["Xác nhận mật khẩu ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(r,{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",value:f,onChange:t=>I(t.target.value),placeholder:"Xác nhận mật khẩu",required:!0,className:"pr-10"}),e.jsx("button",{type:"button",onClick:R,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-maintext hover:text-maintext focus:outline-none",children:x?e.jsx(S,{size:16}):e.jsx(P,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"phoneNumber",children:["Số điện thoại ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(r,{id:"phoneNumber",name:"phoneNumber",value:s.phoneNumber,onChange:l,placeholder:"Nhập số điện thoại",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(a,{htmlFor:"role",children:["Vai trò ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(K,{value:s.role,onValueChange:t=>b("role",t),children:[e.jsx(U,{id:"role",children:e.jsx(X,{placeholder:"Chọn vai trò"})}),e.jsxs($,{children:[e.jsx(k,{value:"ADMIN",children:"Quản trị viên"}),e.jsx(k,{value:"CUSTOMER",children:"Khách hàng"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"citizenId",children:"CCCD/CMND (Tuỳ chọn)"}),e.jsx(r,{id:"citizenId",name:"citizenId",value:s.citizenId||"",onChange:l,placeholder:"Nhập số CCCD/CMND"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"birthday",children:"Ngày sinh"}),e.jsx(r,{id:"birthday",name:"birthday",type:"date",value:s.birthday?typeof s.birthday=="string"?s.birthday:s.birthday.toISOString().split("T")[0]:"",onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{children:"Giới tính"}),e.jsxs(J,{value:s.gender||"male",onValueChange:t=>b("gender",t),className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{value:"male",id:"gender-nam"}),e.jsx(a,{htmlFor:"gender-nam",children:"Nam"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{value:"female",id:"gender-nu"}),e.jsx(a,{htmlFor:"gender-nu",children:"Nữ"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{value:"other",id:"gender-khac"}),e.jsx(a,{htmlFor:"gender-khac",children:"Khác"})]})]})]})]})}),e.jsxs(H,{className:"flex justify-end space-x-4",children:[e.jsx(p,{variant:"outline",type:"button",onClick:()=>o(-1),children:"Hủy"}),e.jsx(p,{type:"submit",disabled:h.isPending,className:"flex items-center gap-2",children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx(v.Icon,{path:D,size:.7,className:"animate-spin"}),"Đang xử lý..."]}):"Tạo tài khoản"})]})]})})]})}const oe=()=>e.jsx(Z,{});export{oe as default};
