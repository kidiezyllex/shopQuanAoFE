import{j as e}from"./ui-vendor-CFM_MCUz.js";import{u as s,r as a}from"./react-vendor-B55MjJUH.js";import{B as r,a as n,b as i,c as t,d as l,e as d}from"./breadcrumb-CP4jYkI2.js";import{B as c,I as h,y as o}from"./index-BHeY-5EX.js";import{C as m,a as x,b as j,c as p,e as u}from"./card-ClEzRAeX.js";import{L as N}from"./label-Bm9nFuXD.js";import{S as g,a as v,b as f,c as y,d as b}from"./select-C6W71KWg.js";import{t as C,M as k,aa as w,ab as S,aC as F}from"./icons-vendor-BrsZP2ku.js";import{R as z,a as I}from"./radio-group-DwYjaxP8.js";import{a as T}from"./authentication-DJyUXwd2.js";import"./query-vendor-CBwfxcof.js";import"./heavy-vendor-BfN2pHnQ.js";const D={fullName:"",email:"",password:"",phoneNumber:"",role:"CUSTOMER",gender:"male",birthday:"",citizenId:""};function M(){const M=s(),[q,E]=a.useState(D),[P,V]=a.useState(""),K=T(),[O,Q]=a.useState(!1),[R,A]=a.useState(!1),B=e=>{const{name:s,value:a}=e.target;E({...q,[s]:a})},H=(e,s)=>{E({...q,[e]:s})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(r,{children:e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(t,{href:"/admin/statistics",children:"Dashboard"})}),e.jsx(l,{}),e.jsx(i,{children:e.jsx(t,{href:"/admin/accounts",children:"Quản lý tài khoản"})}),e.jsx(l,{}),e.jsx(i,{children:e.jsx(d,{children:"Thêm tài khoản mới"})})]})}),e.jsxs(c,{variant:"outline",onClick:()=>M(-1),className:"flex items-center gap-2",children:[e.jsx(C.Icon,{path:k,size:.7}),"Quay lại"]})]}),e.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),!(q.fullName&&q.email&&q.password&&q.phoneNumber))return void o.error("Vui lòng điền đầy đủ thông tin bắt buộc");if(q.password!==P)return void o.error("Mật khẩu xác nhận không khớp");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(q.email))return void o.error("Email không hợp lệ");if(/(84|0[3|5|7|8|9])+([0-9]{8})\b/.test(q.phoneNumber))try{await K.mutateAsync({...q,birthday:q.birthday?new Date(q.birthday):void 0,gender:q.gender},{onSuccess:()=>{o.success("Tạo tài khoản thành công"),M("/admin/accounts")},onError:e=>{let s="Không xác định";e.response&&e.response.data&&"string"==typeof e.response.data.message?s=e.response.data.message:e.message&&"string"==typeof e.message&&(s=e.message),o.error("Tạo tài khoản thất bại: "+s)}})}catch(s){o.error("Tạo tài khoản thất bại")}else o.error("Số điện thoại không hợp lệ")},children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(j,{children:"Thông tin tài khoản"})}),e.jsx(p,{className:"space-y-4 text-maintext",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"fullName",children:["Họ và tên ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(h,{id:"fullName",name:"fullName",value:q.fullName,onChange:B,placeholder:"Nhập họ và tên",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"email",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(h,{id:"email",name:"email",type:"email",value:q.email,onChange:B,placeholder:"Nhập email",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"password",children:["Mật khẩu ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"password",name:"password",type:O?"text":"password",value:q.password,onChange:B,placeholder:"Nhập mật khẩu",required:!0,className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>{Q(!O)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-maintext hover:text-maintext focus:outline-none",children:O?e.jsx(w,{size:16}):e.jsx(S,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"confirmPassword",children:["Xác nhận mật khẩu ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"confirmPassword",name:"confirmPassword",type:R?"text":"password",value:P,onChange:e=>V(e.target.value),placeholder:"Xác nhận mật khẩu",required:!0,className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>{A(!R)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-maintext hover:text-maintext focus:outline-none",children:R?e.jsx(w,{size:16}):e.jsx(S,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"phoneNumber",children:["Số điện thoại ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(h,{id:"phoneNumber",name:"phoneNumber",value:q.phoneNumber,onChange:B,placeholder:"Nhập số điện thoại",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{htmlFor:"role",children:["Vai trò ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(g,{value:q.role,onValueChange:e=>H("role",e),children:[e.jsx(v,{id:"role",children:e.jsx(f,{placeholder:"Chọn vai trò"})}),e.jsxs(y,{children:[e.jsx(b,{value:"ADMIN",children:"Quản trị viên"}),e.jsx(b,{value:"CUSTOMER",children:"Khách hàng"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"citizenId",children:"CCCD/CMND (Tuỳ chọn)"}),e.jsx(h,{id:"citizenId",name:"citizenId",value:q.citizenId||"",onChange:B,placeholder:"Nhập số CCCD/CMND"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"birthday",children:"Ngày sinh"}),e.jsx(h,{id:"birthday",name:"birthday",type:"date",value:q.birthday?"string"==typeof q.birthday?q.birthday:q.birthday.toISOString().split("T")[0]:"",onChange:B})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Giới tính"}),e.jsxs(z,{value:q.gender||"male",onValueChange:e=>H("gender",e),className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{value:"male",id:"gender-nam"}),e.jsx(N,{htmlFor:"gender-nam",children:"Nam"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{value:"female",id:"gender-nu"}),e.jsx(N,{htmlFor:"gender-nu",children:"Nữ"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{value:"other",id:"gender-khac"}),e.jsx(N,{htmlFor:"gender-khac",children:"Khác"})]})]})]})]})}),e.jsxs(u,{className:"flex justify-end space-x-4",children:[e.jsx(c,{variant:"outline",type:"button",onClick:()=>M(-1),children:"Hủy"}),e.jsx(c,{type:"submit",disabled:K.isPending,className:"flex items-center gap-2",children:K.isPending?e.jsxs(e.Fragment,{children:[e.jsx(C.Icon,{path:F,size:.7,className:"animate-spin"}),"Đang xử lý..."]}):"Tạo tài khoản"})]})]})})]})}const q=()=>e.jsx(M,{});export{q as default};
