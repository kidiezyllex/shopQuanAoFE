import{a as u,j as e,B as N,k as c,aa as b,q as w,ao as Z,be as A,G as V,H as M,M as I,P as v,b4 as L,O as S,ac as k}from"./index-Dpx_4rWJ.js";import{C as O,c as P}from"./card-fT6uSY2F.js";import{T as B,b as E,c as h,a as p}from"./tabs-BXj1bKUw.js";import{B as j}from"./badge-CA2Kv9aL.js";import{D as G,a as K,b as R,c as z,d as F,e as H}from"./dialog-BuHyDe_9.js";import{f as W,l as X}from"./index-VIuxkY8Z.js";import"./createLucideIcon-BdgKQErZ.js";import"./typeof-QjJsDpFa.js";const q=[{id:"1",code:"SUMMER2023",name:"Đợt khuyến mãi hè 2023",description:"Giảm giá cho tất cả sản phẩm mùa hè",discountType:"percentage",discountValue:20,minOrderValue:1e6,maxDiscountAmount:5e5,startDate:"2023-06-01T00:00:00Z",endDate:"2023-08-31T23:59:59Z",usageLimit:100,usageCount:45,applyToProducts:"all",status:"expired",createdAt:"2023-05-15T10:00:00Z",updatedAt:"2023-05-15T10:00:00Z"},{id:"2",code:"NEWCUSTOMER",name:"Khách hàng mới",description:"Giảm giá cho khách hàng lần đầu mua hàng",discountType:"percentage",discountValue:10,minOrderValue:5e5,startDate:"2023-01-01T00:00:00Z",endDate:"2023-12-31T23:59:59Z",usageLimit:1e3,usageCount:358,applyToProducts:"all",status:"active",createdAt:"2023-01-01T08:00:00Z",updatedAt:"2023-01-01T08:00:00Z"},{id:"3",code:"Prada10",name:"Giảm giá Prada",description:"Giảm giá cho tất cả sản phẩm Prada",discountType:"percentage",discountValue:10,startDate:"2023-10-01T00:00:00Z",endDate:"2023-10-31T23:59:59Z",usageCount:125,applyToProducts:"specific",productIds:["1","2","3","4"],status:"active",createdAt:"2023-09-25T14:30:00Z",updatedAt:"2023-09-25T14:30:00Z"},{id:"4",code:"BLACKFRIDAY",name:"Black Friday",description:"Giảm giá Black Friday cho tất cả sản phẩm",discountType:"percentage",discountValue:30,minOrderValue:15e5,maxDiscountAmount:1e6,startDate:"2023-11-24T00:00:00Z",endDate:"2023-11-26T23:59:59Z",usageCount:0,applyToProducts:"all",status:"scheduled",createdAt:"2023-10-30T11:00:00Z",updatedAt:"2023-10-30T11:00:00Z"},{id:"5",code:"WELCOME500K",name:"Chào mừng - Giảm 500K",description:"Giảm 500.000đ cho đơn hàng từ 3.000.000đ",discountType:"fixed",discountValue:5e5,minOrderValue:3e6,startDate:"2023-09-01T00:00:00Z",endDate:"2023-12-31T23:59:59Z",usageLimit:50,usageCount:12,applyToProducts:"all",status:"active",createdAt:"2023-08-28T09:15:00Z",updatedAt:"2023-08-28T09:15:00Z"},{id:"6",code:"Uniqlo15",name:"Uniqlo Sale 15%",description:"Giảm giá 15% cho sản phẩm Uniqlo",discountType:"percentage",discountValue:15,startDate:"2023-11-01T00:00:00Z",endDate:"2024-01-31T23:59:59Z",usageCount:27,applyToProducts:"specific",productIds:["5","6","7","8"],status:"active",createdAt:"2023-10-20T15:00:00Z",updatedAt:"2023-10-20T15:00:00Z"},{id:"7",code:"NEWYEAR2024",name:"Năm mới 2024",description:"Khuyến mại đầu năm 2024",discountType:"percentage",discountValue:24,minOrderValue:1e6,maxDiscountAmount:5e5,startDate:"2024-01-01T00:00:00Z",endDate:"2024-01-31T23:59:59Z",usageCount:0,applyToProducts:"all",status:"scheduled",createdAt:"2023-12-01T10:00:00Z",updatedAt:"2023-12-01T10:00:00Z"}];function Q(){const[a,l]=u.useState(""),[n,T]=u.useState("all"),[f,t]=u.useState(!1),[y,D]=u.useState(null),r=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(s),d=s=>{const i=new Date(s);return W(i,"dd/MM/yyyy",{locale:X})},m=q.filter(s=>{if(n!=="all"&&s.status!==n)return!1;if(a){const i=a.toLowerCase();return s.code.toLowerCase().includes(i)||s.name.toLowerCase().includes(i)||s.description&&s.description.toLowerCase().includes(i)}return!0}),o=s=>{switch(s){case"active":return e.jsx(j,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Đang hoạt động"});case"scheduled":return e.jsx(j,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100",children:"Lên lịch"});case"expired":return e.jsx(j,{className:"bg-gray-100 text-maintext hover:bg-gray-100",children:"Đã hết hạn"});case"draft":return e.jsx(j,{className:"bg-amber-100 text-amber-800 hover:bg-amber-100",children:"Bản nháp"})}},x=s=>{D(s),t(!0)},C=()=>{t(!1),D(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:e.jsxs(N,{className:"flex items-center",children:[e.jsx(c.Icon,{path:b,size:.7,className:"mr-2"}),"Tạo mã giảm giá"]})}),e.jsx(O,{children:e.jsx(P,{className:"p-4",children:e.jsxs(B,{defaultValue:"all",className:"w-full",onValueChange:T,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between mb-4",children:[e.jsxs(E,{className:"h-9",children:[e.jsx(h,{value:"all",className:"px-4",children:"Tất cả"}),e.jsx(h,{value:"active",className:"px-4",children:"Đang hoạt động"}),e.jsx(h,{value:"scheduled",className:"px-4",children:"Lên lịch"}),e.jsx(h,{value:"expired",className:"px-4",children:"Đã hết hạn"})]}),e.jsxs("div",{className:"relative w-full sm:w-80",children:[e.jsx(w,{placeholder:"Tìm theo mã, tên...",value:a,onChange:s=>l(s.target.value),className:"pl-10 w-full"}),e.jsx("div",{className:"absolute left-3 top-2.5 text-maintext",children:e.jsx(c.Icon,{path:Z,size:.7})})]})]}),e.jsx(p,{value:"all",className:"mt-0",children:e.jsx(g,{discounts:m,formatCurrency:r,formatDate:d,getStatusBadge:o,onDelete:x})}),e.jsx(p,{value:"active",className:"mt-0",children:e.jsx(g,{discounts:m,formatCurrency:r,formatDate:d,getStatusBadge:o,onDelete:x})}),e.jsx(p,{value:"scheduled",className:"mt-0",children:e.jsx(g,{discounts:m,formatCurrency:r,formatDate:d,getStatusBadge:o,onDelete:x})}),e.jsx(p,{value:"expired",className:"mt-0",children:e.jsx(g,{discounts:m,formatCurrency:r,formatDate:d,getStatusBadge:o,onDelete:x})})]})})}),e.jsx(G,{open:f,onOpenChange:t,children:e.jsxs(K,{children:[e.jsxs(R,{children:[e.jsx(z,{children:"Xác nhận xóa mã giảm giá"}),e.jsxs(F,{children:["Bạn có chắc chắn muốn xóa mã giảm giá ",e.jsx("span",{className:"font-medium",children:y==null?void 0:y.code}),"? Hành động này không thể hoàn tác."]})]}),e.jsxs(H,{children:[e.jsx(N,{variant:"outline",onClick:()=>t(!1),children:"Hủy"}),e.jsx(N,{variant:"destructive",onClick:C,children:"Xóa"})]})]})})]})}const g=({discounts:a,formatCurrency:l,formatDate:n,getStatusBadge:T,onDelete:f})=>a.length===0?e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-maintext",children:"Không tìm thấy mã giảm giá nào phù hợp."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium text-maintext",children:"Mã giảm giá"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-maintext",children:"Tên"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-maintext",children:"Giá trị"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-maintext",children:"Áp dụng"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-maintext",children:"Thời gian"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-maintext",children:"Sử dụng"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-maintext",children:"Trạng thái"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium text-maintext",children:"Thao tác"})]})}),e.jsx("tbody",{className:"divide-y",children:a.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 font-medium",children:t.code}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),t.description&&e.jsx("div",{className:"text-maintext text-xs truncate max-w-[200px]",children:t.description})]})}),e.jsxs("td",{className:"px-4 py-4 text-center",children:[t.discountType==="percentage"?e.jsxs("span",{children:[t.discountValue,"%"]}):e.jsx("span",{children:l(t.discountValue)}),t.minOrderValue&&e.jsxs("div",{className:"text-xs text-maintext",children:["Đơn tối thiểu: ",l(t.minOrderValue)]})]}),e.jsx("td",{className:"px-4 py-4 text-center",children:t.applyToProducts==="all"?e.jsx("span",{children:"Tất cả"}):e.jsx("span",{children:"Sản phẩm cụ thể"})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(c.Icon,{path:A,size:.7,className:"mr-1 text-maintext"}),e.jsxs("div",{children:[e.jsx("div",{children:n(t.startDate)}),e.jsx("div",{className:"text-xs text-maintext",children:n(t.endDate)})]})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("div",{children:[e.jsx("span",{children:t.usageCount}),t.usageLimit&&e.jsxs("span",{className:"text-maintext",children:["/",t.usageLimit]})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:T(t.status)}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs(V,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",children:[e.jsx("span",{className:"sr-only",children:"Mở menu"}),e.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",children:e.jsx("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM13.625 7.5C13.625 8.12132 13.1213 8.625 12.5 8.625C11.8787 8.625 11.375 8.12132 11.375 7.5C11.375 6.87868 11.8787 6.375 12.5 6.375C13.1213 6.375 13.625 6.87868 13.625 7.5Z",Rule:"evenodd",clipRule:"evenodd"})})]})}),e.jsxs(I,{align:"end",children:[e.jsxs(v,{className:"flex items-center cursor-pointer",children:[e.jsx(c.Icon,{path:L,size:.7,className:"mr-2"}),e.jsx("span",{children:"Chỉnh sửa"})]}),e.jsx(S,{}),e.jsxs(v,{className:"flex items-center text-red-600 cursor-pointer",onClick:()=>f(t),children:[e.jsx(c.Icon,{path:k,size:.7,className:"mr-2"}),e.jsx("span",{children:"Xóa"})]})]})]})})})]},t.id))})]})}),ae=()=>e.jsx(Q,{});export{ae as default};
