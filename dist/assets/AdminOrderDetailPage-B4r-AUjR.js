import{U as ve,a as _,aJ as Ce,j as e,a2 as n,B as p,k as I,bk as Ae,ac as we,bj as He,a6 as O,bl as Se,bm as ke,bn as Te,bo as _e,bp as Oe,m as De,b9 as Ie}from"./index-Dpx_4rWJ.js";import{C as d,c as h,a as g,b as u}from"./card-fT6uSY2F.js";import{B as je}from"./badge-CA2Kv9aL.js";import{D as q,a as E,b as M,c as z,e as K}from"./dialog-BuHyDe_9.js";import{T as V,a as $,b as w,c as x,d as Y,e as m}from"./table-BeX0puEz.js";import{a as Ge,d as Pe,e as Be}from"./order-Cuy2edjT.js";import{S as le,a as ie,b as ce,c as de,d as X}from"./select-CS4vNzI5.js";import{B as he,a as xe,b as H,c as B,d as F,e as me}from"./breadcrumb-CJedQ5QG.js";import{f as Fe,l as Ue}from"./index-VIuxkY8Z.js";import{C as qe}from"./circle-check-big-ScwhtRSE.js";import"./createLucideIcon-BdgKQErZ.js";import"./index-BdQq_4o_.js";import"./index-qvEK80KO.js";import"./check-CyKb8IHM.js";import"./typeof-QjJsDpFa.js";const D=[{status:"CHO_XAC_NHAN",label:"Chờ xác nhận",icon:Se,colors:{bgClass:"bg-amber-100 dark:bg-amber-800/30",textClass:"text-amber-600 dark:text-amber-400",borderClass:"border-amber-500 dark:border-amber-500",progressFillClass:"bg-amber-500"}},{status:"CHO_GIAO_HANG",label:"Chờ lấy hàng",icon:ke,colors:{bgClass:"bg-blue-100 dark:bg-blue-800/30",textClass:"text-blue-600 dark:text-blue-400",borderClass:"border-blue-500 dark:border-blue-500",progressFillClass:"bg-blue-500"}},{status:"DANG_VAN_CHUYEN",label:"Đang giao hàng",icon:Te,colors:{bgClass:"bg-orange-100 dark:bg-orange-800/30",textClass:"text-orange-600 dark:text-orange-400",borderClass:"border-orange-500 dark:border-orange-500",progressFillClass:"bg-orange-500"}},{status:"DA_GIAO_HANG",label:"Đã giao hàng",icon:_e,colors:{bgClass:"bg-teal-100 dark:bg-teal-800/30",textClass:"text-teal-600 dark:text-teal-400",borderClass:"border-teal-500 dark:border-teal-500",progressFillClass:"bg-teal-500"}},{status:"HOAN_THANH",label:"Hoàn thành",icon:Oe,colors:{bgClass:"bg-green-100 dark:bg-green-800/30",textClass:"text-primary dark:text-green-400",borderClass:"border-green-500 dark:border-green-500",progressFillClass:"bg-green-500"}}],Ee=({currentStatus:o})=>{const l=(()=>{const t=D.findIndex(i=>i.status===o);return t===-1&&o==="DA_HUY"?-1:t===-1?0:t})();return e.jsx(d,{className:"mb-4 overflow-hidden",children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start relative",children:[D.map((t,i)=>{const S=i<l,C=i===l,U=i<=l;let A="bg-gray-100 dark:bg-gray-700 text-maintext dark:text-maintext border-gray-300 dark:border-gray-600",b,k="text-maintext dark:text-maintext font-medium";return U?(A=`${t.colors.bgClass} ${t.colors.textClass} ${t.colors.borderClass} border-2 shadow-sm`,k=`${t.colors.textClass} font-semibold`,S?b=e.jsx(qe,{size:28,className:t.colors.textClass}):b=e.jsx(I.Icon,{path:t.icon,size:1,className:t.colors.textClass})):b=e.jsx(I.Icon,{path:t.icon,size:1,className:"text-maintext/50 dark:text-maintext"}),e.jsxs("div",{className:"flex flex-col items-center z-10 flex-1 min-w-0 px-1",children:[e.jsx(De.div,{className:`flex h-14 w-14 items-center justify-center rounded-full ${A}`,initial:!1,animate:{scale:C?1.15:1},transition:{type:"spring",stiffness:300,damping:15},children:b}),e.jsx("div",{className:`mt-2.5 text-xs sm:text-sm text-center text-nowrap ${k} w-full sm:w-24 break-words leading-tight`,children:t.label})]},t.status)}),e.jsx("div",{className:"absolute top-7 left-0 right-0 flex items-center -z-0 px-4 sm:px-8 md:px-12",children:D.map((t,i)=>{if(i===D.length-1)return null;const S=i<l?D[i].colors.progressFillClass:"bg-gray-300 dark:bg-gray-600";return e.jsx("div",{className:`h-1 flex-1 ${S}`,style:{margin:"0 2px"}},`line-${i}`)})})]})})})},oe=({status:o})=>{const l=(t=>{switch(t){case"CHO_XAC_NHAN":return{label:"Chờ xác nhận",className:"!bg-amber-50 !text-amber-500 !border-amber-500"};case"CHO_GIAO_HANG":return{label:"Chờ giao hàng",className:"!bg-blue-50 !text-blue-500 !border-blue-500"};case"DANG_VAN_CHUYEN":return{label:"Đang vận chuyển",className:"!bg-orange-50 !text-orange-500 !border-orange-500"};case"DA_GIAO_HANG":return{label:"Đã giao hàng",className:"!bg-green-50 !text-green-500 !border-green-500"};case"HOAN_THANH":return{label:"Hoàn thành",className:"!bg-green-50 !text-green-500 !border-green-500"};case"DA_HUY":return{label:"Đã hủy",className:"!bg-red-50 !text-red-500 !border-red-500"};default:return{label:"Không xác định",className:"!bg-gray-50 !text-maintext !border-gray-500"}}})(o);return e.jsx(je,{className:l.className,children:l.label})},Me=({status:o})=>{const l=(t=>{switch(t){case"PENDING":return{label:"Chưa thanh toán",className:"!bg-amber-50 !text-amber-500 !border-amber-500"};case"PAID":return{label:"Đã thanh toán",className:"!bg-green-50 !text-green-500 !border-green-500"};default:return{label:"Không xác định",className:"!bg-gray-50 !text-maintext !border-gray-500"}}})(o);return e.jsx(je,{className:l.className,children:l.label})};function ze(){var ee,se,ae,ne,te,re;const o=useParams(),G=ve(),l=o.orderId,[t,i]=_.useState(!1),[S,C]=_.useState(!1),[U,A]=_.useState(!1),[b,k]=_.useState(""),[P,Q]=_.useState(""),{data:L,isLoading:ge,isError:ue}=Ge(l),Ne=Pe(),pe=Be(),R=Ce(),be=a=>{const r=["CHO_XAC_NHAN","CHO_GIAO_HANG","DANG_VAN_CHUYEN","DA_GIAO_HANG","HOAN_THANH"],j=r.indexOf(a);return j===-1?r:r.slice(j)},fe=async()=>{if(b){if(b==="HOAN_THANH"&&P==="PENDING"){O.error("Không thể hoàn thành đơn hàng khi chưa thanh toán");return}try{const a={status:b};P&&(a.paymentStatus=P),await Ne.mutateAsync({orderId:l,payload:a},{onSuccess:()=>{O.success("Cập nhật trạng thái đơn hàng thành công"),R.invalidateQueries({queryKey:["order",l]}),i(!1)}})}catch{O.error("Cập nhật trạng thái đơn hàng thất bại")}}},ye=async()=>{try{await pe.mutateAsync(l,{onSuccess:()=>{O.success("Hủy đơn hàng thành công"),R.invalidateQueries({queryKey:["order",l]}),C(!1)}})}catch{O.error("Hủy đơn hàng thất bại")}},N=a=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(a),J=a=>Fe(new Date(a),"dd/MM/yyyy HH:mm",{locale:Ue}),Z=a=>{var r,j,f,y,v;if(a.variant&&a.variant.colorId&&a.variant.sizeId){const c=(j=(r=a.product)==null?void 0:r.variants)==null?void 0:j.find(T=>T.colorId===a.variant.colorId&&T.sizeId===a.variant.sizeId);return((f=c==null?void 0:c.images)==null?void 0:f[0])||null}if((y=a.product)!=null&&y.variants){const c=a.product.variants.find(T=>T.images&&T.images.length>0);return((v=c==null?void 0:c.images)==null?void 0:v[0])||null}return null},W=a=>{switch(a){case"CASH":return"Tiền mặt";case"BANK_TRANSFER":return"Chuyển khoản ngân hàng";case"COD":return"Thanh toán khi nhận hàng";case"MIXED":return"Thanh toán nhiều phương thức";default:return"Không xác định"}};if(ge)return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[e.jsx("div",{className:"mb-0 md:mb-0",children:e.jsx(he,{children:e.jsxs(xe,{children:[e.jsx(H,{children:e.jsx(B,{href:"/admin/statistics",children:"Dashboard"})}),e.jsx(F,{}),e.jsx(H,{children:e.jsx(B,{href:"/admin/orders",children:"Quản lý đơn hàng"})}),e.jsx(F,{}),e.jsx(H,{children:e.jsxs(me,{className:"font-medium",children:["Chi tiết đơn hàng #",l]})})]})})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{className:"h-10 w-32"}),e.jsx(n,{className:"h-10 w-32"}),e.jsx(n,{className:"h-10 w-40"})]})]}),e.jsx(d,{className:"mb-4 overflow-hidden",children:e.jsxs(h,{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-start relative",children:[...Array(5)].map((a,r)=>e.jsxs("div",{className:"flex flex-col items-center z-10 flex-1 min-w-0 px-1",children:[e.jsx(n,{className:"h-14 w-14 rounded-full"}),e.jsx(n,{className:"h-4 w-16 mt-2.5"})]},r))}),e.jsx(n,{className:"mt-6 h-2 w-full rounded-full"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Thông tin đơn hàng"})}),e.jsx(h,{className:"p-4",children:e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((a,r)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(n,{className:"h-4 w-32"}),e.jsx(n,{className:"h-4 w-24"})]},r))})})]}),e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Thông tin khách hàng"})}),e.jsx(h,{className:"p-4",children:e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((a,r)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(n,{className:"h-4 w-28"}),e.jsx(n,{className:"h-4 w-32"})]},r))})})]}),e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Địa chỉ giao hàng"})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"h-4 w-full"}),e.jsx(n,{className:"h-4 w-3/4"}),e.jsx(n,{className:"h-4 w-1/2"})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Sản phẩm đã đặt"})}),e.jsx(h,{className:"p-4",children:e.jsxs(V,{children:[e.jsx($,{children:e.jsxs(w,{children:[e.jsx(x,{children:"Sản phẩm"}),e.jsx(x,{className:"text-right",children:"Đơn giá"}),e.jsx(x,{className:"text-right",children:"SL"}),e.jsx(x,{className:"text-right",children:"Tổng"})]})}),e.jsx(Y,{children:[...Array(3)].map((a,r)=>e.jsxs(w,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"w-10 h-10 rounded"}),e.jsxs("div",{children:[e.jsx(n,{className:"h-4 w-32 mb-1"}),e.jsx(n,{className:"h-3 w-20"})]})]})}),e.jsx(m,{className:"text-right",children:e.jsx(n,{className:"h-4 w-16 ml-auto"})}),e.jsx(m,{className:"text-right",children:e.jsx(n,{className:"h-4 w-8 ml-auto"})}),e.jsx(m,{className:"text-right",children:e.jsx(n,{className:"h-4 w-20 ml-auto"})})]},r))})]})})]}),e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Tổng quan đơn hàng"})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[[...Array(2)].map((a,r)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(n,{className:"h-4 w-32"}),e.jsx(n,{className:"h-4 w-24"})]},r)),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[e.jsx(n,{className:"h-5 w-36"}),e.jsx(n,{className:"h-6 w-28"})]})]})})]})]})]})]});if(ue||!L)return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-red-500",children:"Đã xảy ra lỗi khi tải thông tin đơn hàng hoặc đơn hàng không tồn tại."}),e.jsx(p,{variant:"outline",className:"mt-4",onClick:()=>G("/admin/orders"),children:"Quay lại danh sách đơn hàng"})]})});const s=L.data;return e.jsxs("div",{className:"space-y-4 text-maintext",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[e.jsx("div",{className:"mb-0 md:mb-0",children:e.jsx(he,{children:e.jsxs(xe,{children:[e.jsx(H,{children:e.jsx(B,{href:"/admin/statistics",children:"Dashboard"})}),e.jsx(F,{}),e.jsx(H,{children:e.jsx(B,{href:"/admin/orders",children:"Quản lý đơn hàng"})}),e.jsx(F,{}),e.jsx(H,{children:e.jsxs(me,{className:"font-medium",children:["Chi tiết đơn hàng #",l]})})]})})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(p,{variant:"outline",onClick:()=>A(!0),children:[e.jsx(I.Icon,{path:Ae,size:.7}),"Xem hóa đơn"]}),e.jsxs(p,{variant:"outline",className:"w-full",disabled:["DA_HUY","HOAN_THANH"].includes(s.orderStatus),onClick:()=>C(!0),children:[e.jsx(I.Icon,{path:we,size:.7}),"Hủy đơn hàng"]}),e.jsx(p,{className:"w-full",disabled:["DA_HUY","HOAN_THANH"].includes(s.orderStatus),onClick:()=>{k(s.orderStatus),Q(s.paymentStatus),i(!0)},children:"Cập nhật trạng thái"})]})]}),s.orderStatus!=="DA_HUY"&&e.jsx(Ee,{currentStatus:s.orderStatus}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Thông tin đơn hàng"})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Mã đơn hàng:"}),e.jsx("span",{className:"font-medium text-maintext",children:s.code})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Ngày tạo:"}),e.jsx("span",{className:"text-maintext",children:J(s.createdAt)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Trạng thái đơn hàng:"}),e.jsx(oe,{status:s.orderStatus})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Trạng thái thanh toán:"}),e.jsx(Me,{status:s.paymentStatus})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Phương thức thanh toán:"}),e.jsx("span",{className:"text-maintext",children:W(s.paymentMethod)})]})]})})]}),e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Thông tin khách hàng"})}),e.jsx(h,{className:"p-4",children:e.jsx("div",{className:"space-y-4",children:typeof s.customer=="object"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Tên khách hàng:"}),e.jsx("span",{className:"font-medium text-maintext",children:(ee=s.customer)==null?void 0:ee.fullName})]}),((se=s.customer)==null?void 0:se.email)&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Email:"}),e.jsx("span",{className:"text-maintext",children:s.customer.email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Số điện thoại:"}),e.jsx("span",{className:"text-maintext",children:(ae=s.customer)==null?void 0:ae.phoneNumber})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Tên khách hàng:"}),e.jsx("span",{className:"font-medium text-maintext",children:s.customer})]})})})]}),s.staff&&e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Thông tin nhân viên"})}),e.jsx(h,{className:"p-4",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Tên nhân viên:"}),e.jsx("span",{className:"font-medium text-maintext",children:s.staff.fullName})]})})})]}),e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Địa chỉ giao hàng"})}),e.jsx(h,{className:"p-4",children:s.shippingAddress?e.jsx("div",{className:"space-y-2",children:s.shippingAddress.specificAddress==="Tại quầy"?e.jsx("p",{className:"text-maintext",children:"Tại quầy"}):e.jsxs(e.Fragment,{children:[s.shippingAddress.name&&e.jsxs("p",{className:"text-maintext",children:["Người nhận: ",s.shippingAddress.name]}),s.shippingAddress.phoneNumber&&e.jsxs("p",{className:"text-maintext",children:["Số điện thoại: ",s.shippingAddress.phoneNumber]}),e.jsxs("p",{className:"text-maintext",children:["Địa chỉ:"," ",s.shippingAddress.specificAddress&&`${s.shippingAddress.specificAddress}`]})]})}):e.jsx("p",{className:"text-maintext",children:"Không có thông tin địa chỉ giao hàng"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Sản phẩm đã đặt"})}),e.jsx(h,{className:"p-4",children:e.jsxs(V,{children:[e.jsx($,{children:e.jsxs(w,{children:[e.jsx(x,{children:"Sản phẩm"}),e.jsx(x,{className:"text-right",children:"Đơn giá"}),e.jsx(x,{className:"text-right",children:"SL"}),e.jsx(x,{className:"text-right",children:"Tổng"})]})}),e.jsx(Y,{children:s.items.map((a,r)=>{var f,y,v,c;const j=Z(a);return e.jsxs(w,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items- flex-col gap-2",children:[j&&e.jsx("div",{className:"w-40 h-40 rounded border overflow-hidden bg-gray-100 flex-shrink-0",children:e.jsx("img",{draggable:"false",src:j,alt:((f=a.product)==null?void 0:f.name)||"Sản phẩm",className:"w-full h-full object-contain"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-semibold text-sm text-maintext/70 line-clamp-2",children:((y=a.product)==null?void 0:y.name)||"Sản phẩm không rõ"}),((v=a.product)==null?void 0:v.brand)&&e.jsxs("div",{className:"text-sm text-maintext/70 mt-0.5",children:["Thương hiệu: ",a.product.brand.name]}),e.jsxs("div",{className:"text-sm text-maintext/70 mt-0.5",children:["Mã: ",((c=a.product)==null?void 0:c.code)||"N/A"]})]})]})}),e.jsx(m,{className:"text-right",children:N(a.price)}),e.jsx(m,{className:"text-right",children:a.quantity}),e.jsx(m,{className:"text-right font-medium",children:N(a.price*a.quantity)})]},r)})})]})})]}),e.jsxs(d,{children:[e.jsx(g,{children:e.jsx(u,{children:"Tổng quan đơn hàng"})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-maintext",children:"Tổng tiền hàng:"}),e.jsx("span",{className:"text-maintext",children:N(s.subTotal)})]}),s.voucher&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-maintext",children:["Mã giảm giá (",s.voucher.code,"):"]}),e.jsxs("span",{className:"text-red-500",children:["-",N(s.discount)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[e.jsx("span",{className:"font-bold text-maintext",children:"Tổng thanh toán:"}),e.jsx("span",{className:"text-lg font-bold text-primary",children:N(s.total)})]})]})})]})]})]}),e.jsx(q,{open:t,onOpenChange:i,children:e.jsxs(E,{children:[e.jsx(M,{children:e.jsx(z,{children:"Cập nhật trạng thái"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Trạng thái đơn hàng"}),e.jsxs(le,{value:b,onValueChange:k,children:[e.jsx(ie,{children:e.jsx(ce,{placeholder:"Chọn trạng thái đơn hàng"})}),e.jsx(de,{children:be(s.orderStatus).map(a=>e.jsxs(X,{value:a,children:[a==="CHO_XAC_NHAN"&&"Chờ xác nhận",a==="CHO_GIAO_HANG"&&"Chờ giao hàng",a==="DANG_VAN_CHUYEN"&&"Đang vận chuyển",a==="DA_GIAO_HANG"&&"Đã giao hàng",a==="HOAN_THANH"&&"Hoàn thành"]},a))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Trạng thái thanh toán"}),e.jsxs(le,{value:P,onValueChange:Q,children:[e.jsx(ie,{children:e.jsx(ce,{placeholder:"Chọn trạng thái thanh toán"})}),e.jsxs(de,{children:[e.jsx(X,{value:"PENDING",children:"Chưa thanh toán"}),e.jsx(X,{value:"PAID",children:"Đã thanh toán"})]})]})]})]}),e.jsxs(K,{children:[e.jsx(p,{variant:"outline",onClick:()=>i(!1),children:"Hủy"}),e.jsx(p,{onClick:fe,children:"Cập nhật"})]})]})}),e.jsx(q,{open:S,onOpenChange:C,children:e.jsxs(E,{children:[e.jsx(M,{children:e.jsx(z,{children:"Xác nhận hủy đơn hàng"})}),e.jsx("div",{className:"py-4",children:e.jsx("p",{children:"Bạn có chắc chắn muốn hủy đơn hàng này không? Hành động này không thể hoàn tác."})}),e.jsxs(K,{children:[e.jsx(p,{variant:"outline",onClick:()=>C(!1),children:"Không"}),e.jsx(p,{variant:"destructive",onClick:ye,children:"Xác nhận hủy"})]})]})}),e.jsx(q,{open:U,onOpenChange:A,children:e.jsxs(E,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(M,{children:e.jsxs(z,{children:["Hóa đơn đơn hàng #",s.orderNumber]})}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:"border-b pb-4 mb-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"Clothes Shop"}),e.jsx("p",{className:"text-sm text-maintext",children:"Hóa đơn bán hàng"}),e.jsxs("p",{className:"text-sm text-maintext",children:["Ngày: ",J(s.createdAt)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("h3",{className:"font-bold text-xl mb-2",children:["Mã hóa đơn: #",s.orderNumber]}),e.jsx("p",{className:"text-sm text-maintext",children:e.jsx(oe,{status:s.orderStatus})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Thông tin khách hàng:"}),typeof s.customer=="object"?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:(ne=s.customer)==null?void 0:ne.fullName}),e.jsx("p",{children:(te=s.customer)==null?void 0:te.phoneNumber}),((re=s.customer)==null?void 0:re.email)&&e.jsx("p",{children:s.customer.email})]}):e.jsx("p",{children:s.customer})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Địa chỉ giao hàng:"}),s.shippingAddress?e.jsx(e.Fragment,{children:s.shippingAddress.specificAddress==="Tại quầy"?e.jsx("p",{children:"Tại quầy"}):e.jsxs(e.Fragment,{children:[s.shippingAddress.name&&e.jsxs("p",{children:["Người nhận: ",s.shippingAddress.name]}),s.shippingAddress.phoneNumber&&e.jsxs("p",{children:["Số điện thoại: ",s.shippingAddress.phoneNumber]}),e.jsxs("p",{children:["Địa chỉ:",s.shippingAddress.specificAddress]})]})}):e.jsx("p",{children:"Không có thông tin địa chỉ giao hàng"})]})]}),e.jsxs(V,{children:[e.jsx($,{children:e.jsxs(w,{children:[e.jsx(x,{children:"Sản phẩm"}),e.jsx(x,{className:"text-right",children:"Đơn giá"}),e.jsx(x,{className:"text-right",children:"Số lượng"}),e.jsx(x,{className:"text-right",children:"Thành tiền"})]})}),e.jsx(Y,{children:s.items.map((a,r)=>{var f,y,v,c;const j=Z(a);return e.jsxs(w,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[j&&e.jsx("div",{className:"w-10 h-10 rounded border overflow-hidden bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:j,alt:((f=a.product)==null?void 0:f.name)||"Sản phẩm",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:((y=a.product)==null?void 0:y.name)||"Sản phẩm không rõ"}),((v=a.product)==null?void 0:v.brand)&&e.jsx("div",{className:"text-xs text-maintext/70 mt-0.5",children:a.product.brand.name}),e.jsxs("div",{className:"text-xs text-maintext/70 mt-0.5",children:["Mã: ",((c=a.product)==null?void 0:c.code)||"N/A"]})]})]})}),e.jsx(m,{className:"text-right",children:N(a.price)}),e.jsx(m,{className:"text-right",children:a.quantity}),e.jsx(m,{className:"text-right",children:N(a.price*a.quantity)})]},r)})})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tổng tiền hàng:"}),e.jsx("span",{children:N(s.subTotal)})]}),s.voucher&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Giảm giá (",s.voucher.code,"):"]}),e.jsxs("span",{className:"text-red-500",children:["-",N(s.discount)]})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t font-bold",children:[e.jsx("span",{children:"Tổng thanh toán:"}),e.jsx("span",{children:N(s.total)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Phương thức thanh toán:"}),e.jsx("span",{children:W(s.paymentMethod)})]})]}),e.jsxs("div",{className:"mt-8 text-center text-sm text-maintext",children:[e.jsx("p",{children:"Cảm ơn quý khách đã mua hàng tại Clothes Shop"}),e.jsx("p",{children:"Hotline: 1900 1234"})]})]}),e.jsxs(K,{children:[e.jsx(p,{variant:"outline",onClick:()=>A(!1),children:"Đóng"}),e.jsxs(p,{children:[e.jsx(I.Icon,{path:He,size:.7,className:"mr-2"}),"In hóa đơn"]})]})]})})]})}const ts=()=>{const{orderId:o}=Ie();return o?e.jsx(ze,{params:{orderId:o}}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Chi tiết đơn hàng"}),e.jsx("p",{className:"text-gray-600",children:"ID đơn hàng không hợp lệ"})]})};export{ts as default};
