import{j as s}from"./ui-vendor-CFM_MCUz.js";import{u as e,r as a,i as n}from"./react-vendor-B55MjJUH.js";import{C as t,c as r,a as l,b as i}from"./card-ClEzRAeX.js";import{B as c,y as d}from"./index-BHeY-5EX.js";import{t as h,aR as x,a7 as m,aQ as o,aS as j,aT as g,aU as N,aV as u,aW as p,aE as b}from"./icons-vendor-BrsZP2ku.js";import{B as f}from"./badge-BeHegjHt.js";import{D as v,a as y,b as A,c as C,e as w}from"./dialog-Va24CY58.js";import{T as H,a as k,b as _,c as S,d as T,e as I}from"./table-DL-K3PV4.js";import{a as O,d as D,e as G}from"./order-BDDy-DF1.js";import{d as q}from"./query-vendor-CBwfxcof.js";import{S as F,a as z,b as E,c as K,d as M}from"./select-C6W71KWg.js";import{B as U,a as V,b as Y,c as $,d as P,e as X}from"./breadcrumb-CP4jYkI2.js";import{S as Q}from"./skeleton-4G_X8bY4.js";import{f as B}from"./utils-vendor-C6znz4jh.js";import{l as L}from"./index-DwIVA3Vd.js";import{m as R}from"./heavy-vendor-BfN2pHnQ.js";const W=[{status:"CHO_XAC_NHAN",label:"Chờ xác nhận",icon:j,colors:{bgClass:"bg-amber-100 dark:bg-amber-800/30",textClass:"text-amber-600 dark:text-amber-400",borderClass:"border-amber-500 dark:border-amber-500",progressFillClass:"bg-amber-500"}},{status:"CHO_GIAO_HANG",label:"Chờ lấy hàng",icon:g,colors:{bgClass:"bg-blue-100 dark:bg-blue-800/30",textClass:"text-blue-600 dark:text-blue-400",borderClass:"border-blue-500 dark:border-blue-500",progressFillClass:"bg-blue-500"}},{status:"DANG_VAN_CHUYEN",label:"Đang giao hàng",icon:N,colors:{bgClass:"bg-orange-100 dark:bg-orange-800/30",textClass:"text-orange-600 dark:text-orange-400",borderClass:"border-orange-500 dark:border-orange-500",progressFillClass:"bg-orange-500"}},{status:"DA_GIAO_HANG",label:"Đã giao hàng",icon:u,colors:{bgClass:"bg-teal-100 dark:bg-teal-800/30",textClass:"text-teal-600 dark:text-teal-400",borderClass:"border-teal-500 dark:border-teal-500",progressFillClass:"bg-teal-500"}},{status:"HOAN_THANH",label:"Hoàn thành",icon:p,colors:{bgClass:"bg-green-100 dark:bg-green-800/30",textClass:"text-primary dark:text-green-400",borderClass:"border-green-500 dark:border-green-500",progressFillClass:"bg-green-500"}}],J=({currentStatus:e})=>{const a=(()=>{const s=W.findIndex((s=>s.status===e));return-1===s&&"DA_HUY"===e?-1:-1===s?0:s})();return s.jsx(t,{className:"mb-4 overflow-hidden",children:s.jsx(r,{className:"p-4",children:s.jsxs("div",{className:"flex justify-between items-start relative",children:[W.map(((e,n)=>{const t=n<a,r=n===a;let l,i="bg-gray-100 dark:bg-gray-700 text-maintext dark:text-maintext border-gray-300 dark:border-gray-600",c="text-maintext dark:text-maintext font-medium";return n<=a?(i=`${e.colors.bgClass} ${e.colors.textClass} ${e.colors.borderClass} border-2 shadow-sm`,c=`${e.colors.textClass} font-semibold`,l=t?s.jsx(b,{size:28,className:e.colors.textClass}):s.jsx(h.Icon,{path:e.icon,size:1,className:e.colors.textClass})):l=s.jsx(h.Icon,{path:e.icon,size:1,className:"text-maintext/50 dark:text-maintext"}),s.jsxs("div",{className:"flex flex-col items-center z-10 flex-1 min-w-0 px-1",children:[s.jsx(R.div,{className:`flex h-14 w-14 items-center justify-center rounded-full ${i}`,initial:!1,animate:{scale:r?1.15:1},transition:{type:"spring",stiffness:300,damping:15},children:l}),s.jsx("div",{className:`mt-2.5 text-xs sm:text-sm text-center text-nowrap ${c} w-full sm:w-24 break-words leading-tight`,children:e.label})]},e.status)})),s.jsx("div",{className:"absolute top-7 left-0 right-0 flex items-center -z-0 px-4 sm:px-8 md:px-12",children:W.map(((e,n)=>{if(n===W.length-1)return null;const t=n<a?W[n].colors.progressFillClass:"bg-gray-300 dark:bg-gray-600";return s.jsx("div",{className:`h-1 flex-1 ${t}`,style:{margin:"0 2px"}},`line-${n}`)}))})]})})})},Z=({status:e})=>{const a=(s=>{switch(s){case"CHO_XAC_NHAN":return{label:"Chờ xác nhận",className:"!bg-amber-50 !text-amber-500 !border-amber-500"};case"CHO_GIAO_HANG":return{label:"Chờ giao hàng",className:"!bg-blue-50 !text-blue-500 !border-blue-500"};case"DANG_VAN_CHUYEN":return{label:"Đang vận chuyển",className:"!bg-orange-50 !text-orange-500 !border-orange-500"};case"DA_GIAO_HANG":return{label:"Đã giao hàng",className:"!bg-green-50 !text-green-500 !border-green-500"};case"HOAN_THANH":return{label:"Hoàn thành",className:"!bg-green-50 !text-green-500 !border-green-500"};case"DA_HUY":return{label:"Đã hủy",className:"!bg-red-50 !text-red-500 !border-red-500"};default:return{label:"Không xác định",className:"!bg-gray-50 !text-maintext !border-gray-500"}}})(e);return s.jsx(f,{className:a.className,children:a.label})},ss=({status:e})=>{const a=(s=>{switch(s){case"PENDING":return{label:"Chưa thanh toán",className:"!bg-amber-50 !text-amber-500 !border-amber-500"};case"PAID":return{label:"Đã thanh toán",className:"!bg-green-50 !text-green-500 !border-green-500"};default:return{label:"Không xác định",className:"!bg-gray-50 !text-maintext !border-gray-500"}}})(e);return s.jsx(f,{className:a.className,children:a.label})};function es(){var n,j,g,N,u,p;const b=useParams(),f=e(),R=b.orderId,[W,es]=a.useState(!1),[as,ns]=a.useState(!1),[ts,rs]=a.useState(!1),[ls,is]=a.useState(""),[cs,ds]=a.useState(""),{data:hs,isLoading:xs,isError:ms}=O(R),os=D(),js=G(),gs=q(),Ns=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(s),us=s=>B(new Date(s),"dd/MM/yyyy HH:mm",{locale:L}),ps=s=>{var e,a,n,t,r;if(s.variant&&s.variant.colorId&&s.variant.sizeId){const t=null==(a=null==(e=s.product)?void 0:e.variants)?void 0:a.find((e=>e.colorId===s.variant.colorId&&e.sizeId===s.variant.sizeId));return(null==(n=null==t?void 0:t.images)?void 0:n[0])||null}if(null==(t=s.product)?void 0:t.variants){const e=s.product.variants.find((s=>s.images&&s.images.length>0));return(null==(r=null==e?void 0:e.images)?void 0:r[0])||null}return null},bs=s=>{switch(s){case"CASH":return"Tiền mặt";case"BANK_TRANSFER":return"Chuyển khoản ngân hàng";case"COD":return"Thanh toán khi nhận hàng";case"MIXED":return"Thanh toán nhiều phương thức";default:return"Không xác định"}};if(xs)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[s.jsx("div",{className:"mb-0 md:mb-0",children:s.jsx(U,{children:s.jsxs(V,{children:[s.jsx(Y,{children:s.jsx($,{href:"/admin/statistics",children:"Dashboard"})}),s.jsx(P,{}),s.jsx(Y,{children:s.jsx($,{href:"/admin/orders",children:"Quản lý đơn hàng"})}),s.jsx(P,{}),s.jsx(Y,{children:s.jsxs(X,{className:"font-medium",children:["Chi tiết đơn hàng #",R]})})]})})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Q,{className:"h-10 w-32"}),s.jsx(Q,{className:"h-10 w-32"}),s.jsx(Q,{className:"h-10 w-40"})]})]}),s.jsx(t,{className:"mb-4 overflow-hidden",children:s.jsxs(r,{className:"p-4",children:[s.jsx("div",{className:"flex justify-between items-start relative",children:[...Array(5)].map(((e,a)=>s.jsxs("div",{className:"flex flex-col items-center z-10 flex-1 min-w-0 px-1",children:[s.jsx(Q,{className:"h-14 w-14 rounded-full"}),s.jsx(Q,{className:"h-4 w-16 mt-2.5"})]},a)))}),s.jsx(Q,{className:"mt-6 h-2 w-full rounded-full"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Thông tin đơn hàng"})}),s.jsx(r,{className:"p-4",children:s.jsx("div",{className:"space-y-4",children:[...Array(5)].map(((e,a)=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Q,{className:"h-4 w-32"}),s.jsx(Q,{className:"h-4 w-24"})]},a)))})})]}),s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Thông tin khách hàng"})}),s.jsx(r,{className:"p-4",children:s.jsx("div",{className:"space-y-4",children:[...Array(3)].map(((e,a)=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Q,{className:"h-4 w-28"}),s.jsx(Q,{className:"h-4 w-32"})]},a)))})})]}),s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Địa chỉ giao hàng"})}),s.jsx(r,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{className:"h-4 w-full"}),s.jsx(Q,{className:"h-4 w-3/4"}),s.jsx(Q,{className:"h-4 w-1/2"})]})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Sản phẩm đã đặt"})}),s.jsx(r,{className:"p-4",children:s.jsxs(H,{children:[s.jsx(k,{children:s.jsxs(_,{children:[s.jsx(S,{children:"Sản phẩm"}),s.jsx(S,{className:"text-right",children:"Đơn giá"}),s.jsx(S,{className:"text-right",children:"SL"}),s.jsx(S,{className:"text-right",children:"Tổng"})]})}),s.jsx(T,{children:[...Array(3)].map(((e,a)=>s.jsxs(_,{children:[s.jsx(I,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{className:"w-10 h-10 rounded"}),s.jsxs("div",{children:[s.jsx(Q,{className:"h-4 w-32 mb-1"}),s.jsx(Q,{className:"h-3 w-20"})]})]})}),s.jsx(I,{className:"text-right",children:s.jsx(Q,{className:"h-4 w-16 ml-auto"})}),s.jsx(I,{className:"text-right",children:s.jsx(Q,{className:"h-4 w-8 ml-auto"})}),s.jsx(I,{className:"text-right",children:s.jsx(Q,{className:"h-4 w-20 ml-auto"})})]},a)))})]})})]}),s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Tổng quan đơn hàng"})}),s.jsx(r,{className:"p-4",children:s.jsxs("div",{className:"space-y-4",children:[[...Array(2)].map(((e,a)=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Q,{className:"h-4 w-32"}),s.jsx(Q,{className:"h-4 w-24"})]},a))),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[s.jsx(Q,{className:"h-5 w-36"}),s.jsx(Q,{className:"h-6 w-28"})]})]})})]})]})]})]});if(ms||!hs)return s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"text-center py-10",children:[s.jsx("p",{className:"text-red-500",children:"Đã xảy ra lỗi khi tải thông tin đơn hàng hoặc đơn hàng không tồn tại."}),s.jsx(c,{variant:"outline",className:"mt-4",onClick:()=>f("/admin/orders"),children:"Quay lại danh sách đơn hàng"})]})});const fs=hs.data;return s.jsxs("div",{className:"space-y-4 text-maintext",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[s.jsx("div",{className:"mb-0 md:mb-0",children:s.jsx(U,{children:s.jsxs(V,{children:[s.jsx(Y,{children:s.jsx($,{href:"/admin/statistics",children:"Dashboard"})}),s.jsx(P,{}),s.jsx(Y,{children:s.jsx($,{href:"/admin/orders",children:"Quản lý đơn hàng"})}),s.jsx(P,{}),s.jsx(Y,{children:s.jsxs(X,{className:"font-medium",children:["Chi tiết đơn hàng #",R]})})]})})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(c,{variant:"outline",onClick:()=>rs(!0),children:[s.jsx(h.Icon,{path:x,size:.7}),"Xem hóa đơn"]}),s.jsxs(c,{variant:"outline",className:"w-full",disabled:["DA_HUY","HOAN_THANH"].includes(fs.orderStatus),onClick:()=>ns(!0),children:[s.jsx(h.Icon,{path:m,size:.7}),"Hủy đơn hàng"]}),s.jsx(c,{className:"w-full",disabled:["DA_HUY","HOAN_THANH"].includes(fs.orderStatus),onClick:()=>{is(fs.orderStatus),ds(fs.paymentStatus),es(!0)},children:"Cập nhật trạng thái"})]})]}),"DA_HUY"!==fs.orderStatus&&s.jsx(J,{currentStatus:fs.orderStatus}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Thông tin đơn hàng"})}),s.jsx(r,{className:"p-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Mã đơn hàng:"}),s.jsx("span",{className:"font-medium text-maintext",children:fs.code})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Ngày tạo:"}),s.jsx("span",{className:"text-maintext",children:us(fs.createdAt)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Trạng thái đơn hàng:"}),s.jsx(Z,{status:fs.orderStatus})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Trạng thái thanh toán:"}),s.jsx(ss,{status:fs.paymentStatus})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Phương thức thanh toán:"}),s.jsx("span",{className:"text-maintext",children:bs(fs.paymentMethod)})]})]})})]}),s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Thông tin khách hàng"})}),s.jsx(r,{className:"p-4",children:s.jsx("div",{className:"space-y-4",children:"object"==typeof fs.customer?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Tên khách hàng:"}),s.jsx("span",{className:"font-medium text-maintext",children:null==(n=fs.customer)?void 0:n.fullName})]}),(null==(j=fs.customer)?void 0:j.email)&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Email:"}),s.jsx("span",{className:"text-maintext",children:fs.customer.email})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Số điện thoại:"}),s.jsx("span",{className:"text-maintext",children:null==(g=fs.customer)?void 0:g.phoneNumber})]})]}):s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Tên khách hàng:"}),s.jsx("span",{className:"font-medium text-maintext",children:fs.customer})]})})})]}),fs.staff&&s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Thông tin nhân viên"})}),s.jsx(r,{className:"p-4",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Tên nhân viên:"}),s.jsx("span",{className:"font-medium text-maintext",children:fs.staff.fullName})]})})})]}),s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Địa chỉ giao hàng"})}),s.jsx(r,{className:"p-4",children:fs.shippingAddress?s.jsx("div",{className:"space-y-2",children:"Tại quầy"===fs.shippingAddress.specificAddress?s.jsx("p",{className:"text-maintext",children:"Tại quầy"}):s.jsxs(s.Fragment,{children:[fs.shippingAddress.name&&s.jsxs("p",{className:"text-maintext",children:["Người nhận: ",fs.shippingAddress.name]}),fs.shippingAddress.phoneNumber&&s.jsxs("p",{className:"text-maintext",children:["Số điện thoại: ",fs.shippingAddress.phoneNumber]}),s.jsxs("p",{className:"text-maintext",children:["Địa chỉ:"," ",fs.shippingAddress.specificAddress&&`${fs.shippingAddress.specificAddress}`]})]})}):s.jsx("p",{className:"text-maintext",children:"Không có thông tin địa chỉ giao hàng"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Sản phẩm đã đặt"})}),s.jsx(r,{className:"p-4",children:s.jsxs(H,{children:[s.jsx(k,{children:s.jsxs(_,{children:[s.jsx(S,{children:"Sản phẩm"}),s.jsx(S,{className:"text-right",children:"Đơn giá"}),s.jsx(S,{className:"text-right",children:"SL"}),s.jsx(S,{className:"text-right",children:"Tổng"})]})}),s.jsx(T,{children:fs.items.map(((e,a)=>{var n,t,r,l;const i=ps(e);return s.jsxs(_,{children:[s.jsx(I,{children:s.jsxs("div",{className:"flex items- flex-col gap-2",children:[i&&s.jsx("div",{className:"w-40 h-40 rounded border overflow-hidden bg-gray-100 flex-shrink-0",children:s.jsx("img",{draggable:"false",src:i,alt:(null==(n=e.product)?void 0:n.name)||"Sản phẩm",className:"w-full h-full object-contain"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"font-semibold text-sm text-maintext/70 line-clamp-2",children:(null==(t=e.product)?void 0:t.name)||"Sản phẩm không rõ"}),(null==(r=e.product)?void 0:r.brand)&&s.jsxs("div",{className:"text-sm text-maintext/70 mt-0.5",children:["Thương hiệu: ",e.product.brand.name]}),s.jsxs("div",{className:"text-sm text-maintext/70 mt-0.5",children:["Mã: ",(null==(l=e.product)?void 0:l.code)||"N/A"]})]})]})}),s.jsx(I,{className:"text-right",children:Ns(e.price)}),s.jsx(I,{className:"text-right",children:e.quantity}),s.jsx(I,{className:"text-right font-medium",children:Ns(e.price*e.quantity)})]},a)}))})]})})]}),s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(i,{children:"Tổng quan đơn hàng"})}),s.jsx(r,{className:"p-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-maintext",children:"Tổng tiền hàng:"}),s.jsx("span",{className:"text-maintext",children:Ns(fs.subTotal)})]}),fs.voucher&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-maintext",children:["Mã giảm giá (",fs.voucher.code,"):"]}),s.jsxs("span",{className:"text-red-500",children:["-",Ns(fs.discount)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[s.jsx("span",{className:"font-bold text-maintext",children:"Tổng thanh toán:"}),s.jsx("span",{className:"text-lg font-bold text-primary",children:Ns(fs.total)})]})]})})]})]})]}),s.jsx(v,{open:W,onOpenChange:es,children:s.jsxs(y,{children:[s.jsx(A,{children:s.jsx(C,{children:"Cập nhật trạng thái"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Trạng thái đơn hàng"}),s.jsxs(F,{value:ls,onValueChange:is,children:[s.jsx(z,{children:s.jsx(E,{placeholder:"Chọn trạng thái đơn hàng"})}),s.jsx(K,{children:(s=>{const e=["CHO_XAC_NHAN","CHO_GIAO_HANG","DANG_VAN_CHUYEN","DA_GIAO_HANG","HOAN_THANH"],a=e.indexOf(s);return-1===a?e:e.slice(a)})(fs.orderStatus).map((e=>s.jsxs(M,{value:e,children:["CHO_XAC_NHAN"===e&&"Chờ xác nhận","CHO_GIAO_HANG"===e&&"Chờ giao hàng","DANG_VAN_CHUYEN"===e&&"Đang vận chuyển","DA_GIAO_HANG"===e&&"Đã giao hàng","HOAN_THANH"===e&&"Hoàn thành"]},e)))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Trạng thái thanh toán"}),s.jsxs(F,{value:cs,onValueChange:ds,children:[s.jsx(z,{children:s.jsx(E,{placeholder:"Chọn trạng thái thanh toán"})}),s.jsxs(K,{children:[s.jsx(M,{value:"PENDING",children:"Chưa thanh toán"}),s.jsx(M,{value:"PAID",children:"Đã thanh toán"})]})]})]})]}),s.jsxs(w,{children:[s.jsx(c,{variant:"outline",onClick:()=>es(!1),children:"Hủy"}),s.jsx(c,{onClick:async()=>{if(ls)if("HOAN_THANH"!==ls||"PENDING"!==cs)try{const s={status:ls};cs&&(s.paymentStatus=cs),await os.mutateAsync({orderId:R,payload:s},{onSuccess:()=>{d.success("Cập nhật trạng thái đơn hàng thành công"),gs.invalidateQueries({queryKey:["order",R]}),es(!1)}})}catch(s){d.error("Cập nhật trạng thái đơn hàng thất bại")}else d.error("Không thể hoàn thành đơn hàng khi chưa thanh toán")},children:"Cập nhật"})]})]})}),s.jsx(v,{open:as,onOpenChange:ns,children:s.jsxs(y,{children:[s.jsx(A,{children:s.jsx(C,{children:"Xác nhận hủy đơn hàng"})}),s.jsx("div",{className:"py-4",children:s.jsx("p",{children:"Bạn có chắc chắn muốn hủy đơn hàng này không? Hành động này không thể hoàn tác."})}),s.jsxs(w,{children:[s.jsx(c,{variant:"outline",onClick:()=>ns(!1),children:"Không"}),s.jsx(c,{variant:"destructive",onClick:async()=>{try{await js.mutateAsync(R,{onSuccess:()=>{d.success("Hủy đơn hàng thành công"),gs.invalidateQueries({queryKey:["order",R]}),ns(!1)}})}catch(s){d.error("Hủy đơn hàng thất bại")}},children:"Xác nhận hủy"})]})]})}),s.jsx(v,{open:ts,onOpenChange:rs,children:s.jsxs(y,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(A,{children:s.jsxs(C,{children:["Hóa đơn đơn hàng #",fs.orderNumber]})}),s.jsxs("div",{className:"py-4",children:[s.jsx("div",{className:"border-b pb-4 mb-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-xl mb-2",children:"Clothes Shop"}),s.jsx("p",{className:"text-sm text-maintext",children:"Hóa đơn bán hàng"}),s.jsxs("p",{className:"text-sm text-maintext",children:["Ngày: ",us(fs.createdAt)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("h3",{className:"font-bold text-xl mb-2",children:["Mã hóa đơn: #",fs.orderNumber]}),s.jsx("p",{className:"text-sm text-maintext",children:s.jsx(Z,{status:fs.orderStatus})})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Thông tin khách hàng:"}),"object"==typeof fs.customer?s.jsxs(s.Fragment,{children:[s.jsx("p",{children:null==(N=fs.customer)?void 0:N.fullName}),s.jsx("p",{children:null==(u=fs.customer)?void 0:u.phoneNumber}),(null==(p=fs.customer)?void 0:p.email)&&s.jsx("p",{children:fs.customer.email})]}):s.jsx("p",{children:fs.customer})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Địa chỉ giao hàng:"}),fs.shippingAddress?s.jsx(s.Fragment,{children:"Tại quầy"===fs.shippingAddress.specificAddress?s.jsx("p",{children:"Tại quầy"}):s.jsxs(s.Fragment,{children:[fs.shippingAddress.name&&s.jsxs("p",{children:["Người nhận: ",fs.shippingAddress.name]}),fs.shippingAddress.phoneNumber&&s.jsxs("p",{children:["Số điện thoại: ",fs.shippingAddress.phoneNumber]}),s.jsxs("p",{children:["Địa chỉ:",fs.shippingAddress.specificAddress]})]})}):s.jsx("p",{children:"Không có thông tin địa chỉ giao hàng"})]})]}),s.jsxs(H,{children:[s.jsx(k,{children:s.jsxs(_,{children:[s.jsx(S,{children:"Sản phẩm"}),s.jsx(S,{className:"text-right",children:"Đơn giá"}),s.jsx(S,{className:"text-right",children:"Số lượng"}),s.jsx(S,{className:"text-right",children:"Thành tiền"})]})}),s.jsx(T,{children:fs.items.map(((e,a)=>{var n,t,r,l;const i=ps(e);return s.jsxs(_,{children:[s.jsx(I,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[i&&s.jsx("div",{className:"w-10 h-10 rounded border overflow-hidden bg-gray-100 flex-shrink-0",children:s.jsx("img",{src:i,alt:(null==(n=e.product)?void 0:n.name)||"Sản phẩm",className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"font-medium text-sm",children:(null==(t=e.product)?void 0:t.name)||"Sản phẩm không rõ"}),(null==(r=e.product)?void 0:r.brand)&&s.jsx("div",{className:"text-xs text-maintext/70 mt-0.5",children:e.product.brand.name}),s.jsxs("div",{className:"text-xs text-maintext/70 mt-0.5",children:["Mã: ",(null==(l=e.product)?void 0:l.code)||"N/A"]})]})]})}),s.jsx(I,{className:"text-right",children:Ns(e.price)}),s.jsx(I,{className:"text-right",children:e.quantity}),s.jsx(I,{className:"text-right",children:Ns(e.price*e.quantity)})]},a)}))})]}),s.jsxs("div",{className:"mt-6 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tổng tiền hàng:"}),s.jsx("span",{children:Ns(fs.subTotal)})]}),fs.voucher&&s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Giảm giá (",fs.voucher.code,"):"]}),s.jsxs("span",{className:"text-red-500",children:["-",Ns(fs.discount)]})]}),s.jsxs("div",{className:"flex justify-between pt-2 border-t font-bold",children:[s.jsx("span",{children:"Tổng thanh toán:"}),s.jsx("span",{children:Ns(fs.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Phương thức thanh toán:"}),s.jsx("span",{children:bs(fs.paymentMethod)})]})]}),s.jsxs("div",{className:"mt-8 text-center text-sm text-maintext",children:[s.jsx("p",{children:"Cảm ơn quý khách đã mua hàng tại Clothes Shop"}),s.jsx("p",{children:"Hotline: 1900 1234"})]})]}),s.jsxs(w,{children:[s.jsx(c,{variant:"outline",onClick:()=>rs(!1),children:"Đóng"}),s.jsxs(c,{children:[s.jsx(h.Icon,{path:o,size:.7,className:"mr-2"}),"In hóa đơn"]})]})]})})]})}const as=()=>{const{orderId:e}=n();return e?s.jsx(es,{params:{orderId:e}}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Chi tiết đơn hàng"}),s.jsx("p",{className:"text-gray-600",children:"ID đơn hàng không hợp lệ"})]})};export{as as default};
