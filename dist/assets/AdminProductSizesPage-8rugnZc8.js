import{j as e}from"./ui-vendor-CFM_MCUz.js";import{r as s}from"./react-vendor-B55MjJUH.js";import{S as t}from"./skeleton-4G_X8bY4.js";import{t as a,a5 as i,aM as n}from"./icons-vendor-BrsZP2ku.js";import{B as r,y as c,I as l}from"./index-BHeY-5EX.js";import{o as x,v as d,w as h}from"./attributes-DYSh1UfM.js";import{d as m}from"./query-vendor-CBwfxcof.js";import{B as o,a as p,b as j,c as u,d as N,e as g}from"./breadcrumb-CP4jYkI2.js";import{T as v,a as y,b as f,c as w,d as b,e as D}from"./table-DL-K3PV4.js";import{S as T,a as k,b as C,c as O,d as S}from"./select-C6W71KWg.js";import{L as H}from"./label-Bm9nFuXD.js";import"./heavy-vendor-BfN2pHnQ.js";function _(){const[l,h]=s.useState(""),[T,k]=s.useState({}),{data:C,isLoading:O,isError:S}=x(T),H=d(),_=m(),[G,K]=s.useState(!1),[z,I]=s.useState(null),[F,q]=s.useState(!1),Q=s.useMemo((()=>{if(!(null==C?void 0:C.data)||!l.trim())return null==C?void 0:C.data;const e=l.toLowerCase().trim(),s=Number(e);return C.data.filter((t=>isNaN(s)?String(t.value).includes(e):t.value===s))}),[null==C?void 0:C.data,l]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx(o,{children:e.jsxs(p,{children:[e.jsx(j,{children:e.jsx(u,{href:"/admin/statistics",children:"Dashboard"})}),e.jsx(N,{}),e.jsx(j,{children:e.jsx(u,{href:"/admin/products",children:"Quản lý sản phẩm"})}),e.jsx(N,{}),e.jsx(j,{children:e.jsx(g,{children:"Kích cỡ"})})]})})}),e.jsxs(Dialog,{open:F,onOpenChange:q,children:[e.jsx(DialogTrigger,{asChild:!0,children:e.jsxs(r,{onClick:()=>q(!0),children:[e.jsx(a.Icon,{path:i,size:.7}),"Thêm kích cỡ mới"]})}),e.jsx(A,{isOpen:F,onClose:()=>q(!1)})]}),O?e.jsx("div",{className:"bg-white rounded-[6px] shadow-sm overflow-visible",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(f,{children:[e.jsx(w,{className:"px-4 py-4 text-left text-sm font-medium text-maintext",children:"ID"}),e.jsx(w,{className:"px-4 py-4 text-left text-sm font-medium text-maintext",children:"Kích cỡ"}),e.jsx(w,{className:"px-4 py-4 text-left text-sm font-medium text-maintext",children:"Trạng thái"}),e.jsx(w,{className:"px-4 py-4 text-left text-sm font-medium text-maintext",children:"Ngày cập nhật"}),e.jsx(w,{className:"px-4 py-4 text-right text-sm font-medium text-maintext",children:"Thao tác"})]})}),e.jsx(b,{children:[...Array(5)].map(((s,a)=>e.jsxs(f,{children:[e.jsx(D,{className:"px-4 py-4 whitespace-nowrap",children:e.jsx(t,{className:"h-4 w-[80px]"})}),e.jsx(D,{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx(t,{className:"h-8 w-8 rounded-[6px]"})})}),e.jsx(D,{className:"px-4 py-4 whitespace-nowrap",children:e.jsx(t,{className:"h-6 w-[100px] rounded-full"})}),e.jsx(D,{className:"px-4 py-4 whitespace-nowrap",children:e.jsx(t,{className:"h-4 w-[100px]"})}),e.jsx(D,{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(t,{className:"h-8 w-8 rounded-[6px]"}),e.jsx(t,{className:"h-8 w-8 rounded-[6px]"})]})})]},a)))})]})})}):S?e.jsxs("div",{className:"bg-white rounded-[6px] shadow-sm p-4 text-center",children:[e.jsx("p",{className:"text-red-500",children:"Đã xảy ra lỗi khi tải dữ liệu. Vui lòng thử lại sau."}),e.jsx(r,{variant:"outline",className:"mt-4",onClick:()=>_.invalidateQueries({queryKey:["sizes"]}),children:"Thử lại"})]}):e.jsx("div",{className:"bg-white rounded-[6px] shadow-sm overflow-visible",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(f,{children:[e.jsx(w,{className:"px-4 py-4 text-left text-sm font-medium text-maintext",children:"ID"}),e.jsx(w,{className:"px-4 py-4 text-left text-sm font-medium text-maintext",children:"Kích cỡ"}),e.jsx(w,{className:"px-4 py-4 text-left text-sm font-medium text-maintext",children:"Trạng thái"}),e.jsx(w,{className:"px-4 py-4 text-left text-sm font-medium text-maintext",children:"Ngày cập nhật"}),e.jsx(w,{className:"px-4 py-4 text-right text-sm font-medium text-maintext",children:"Thao tác"})]})}),e.jsx(b,{children:(null==Q?void 0:Q.length)?Q.map((s=>{return e.jsxs(f,{className:"hover:bg-gray-50",children:[e.jsx(D,{className:"px-4 py-4 whitespace-nowrap text-sm text-maintext",children:s.id}),e.jsx(D,{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"h-8 w-8 rounded-[6px] bg-gray-100 flex items-center justify-center border border-gray-200",children:e.jsx("span",{className:"text-sm font-medium",children:s.value})})})}),e.jsx(D,{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+("HOAT_DONG"===s.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"HOAT_DONG"===s.status?"Hoạt động":"Không hoạt động"})}),e.jsx(D,{className:"px-4 py-4 whitespace-nowrap text-sm text-maintext",children:(t=s.updatedAt,new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(t)))}),e.jsx(D,{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"flex items-center justify-end space-x-2",children:e.jsxs(Dialog,{open:G&&z===s.id,onOpenChange:K,children:[e.jsx(DialogTrigger,{asChild:!0,children:e.jsx(r,{variant:"outline",size:"icon",onClick:()=>{I(s.id),K(!0)},title:"Xóa",children:e.jsx(a.Icon,{path:n,size:.7})})}),e.jsxs(DialogContent,{children:[e.jsx(DialogHeader,{children:e.jsx(DialogTitle,{children:"Xác nhận xóa kích cỡ"})}),e.jsx("p",{children:"Bạn có chắc chắn muốn xóa kích cỡ này không?"}),e.jsxs(DialogFooter,{children:[e.jsx(DialogClose,{asChild:!0,children:e.jsx(r,{variant:"outline",onClick:()=>K(!1),children:"Hủy"})}),e.jsx(r,{variant:"destructive",onClick:()=>{z&&((async e=>{try{await H.mutateAsync(e,{onSuccess:()=>{c.success("Đã xóa kích cỡ thành công"),_.invalidateQueries({queryKey:["sizes"]})}})}catch(s){c.error("Xóa kích cỡ thất bại")}})(z),K(!1))},children:"Xóa"})]})]})]})})})]},s.id);var t})):e.jsx(f,{children:e.jsx(D,{colSpan:5,className:"px-4 py-8 text-center text-maintext",children:"Không tìm thấy kích cỡ nào"})})})]})})})]})}function A({isOpen:t,onClose:a}){const i=m(),n=h(),[x,d]=s.useState({value:0,status:"HOAT_DONG"}),[o,p]=s.useState({value:""});return e.jsxs(DialogContent,{className:"sm:max-w-4xl",children:[e.jsx(DialogHeader,{children:e.jsx(DialogTitle,{children:"Thêm kích cỡ mới"})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{let e=!0;const s={...o};return x.value<=0&&(s.value="Giá trị kích cỡ phải lớn hơn 0",e=!1),p(s),e})())try{await n.mutateAsync(x,{onSuccess:()=>{c.success("Thêm kích cỡ thành công"),i.invalidateQueries({queryKey:["sizes"]}),d({value:0,status:"HOAT_DONG"}),a()},onError:e=>{"Duplicate entry. This record already exists."===e.message||c.error("Thêm kích cỡ thất bại: Giá trị kích cỡ đã tồn tại.")}})}catch(s){}},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"create-value",children:"Giá trị kích cỡ"}),e.jsx(l,{id:"create-value",name:"value",type:"number",placeholder:"Nhập giá trị kích cỡ",value:x.value||"",onChange:e=>{const{name:s,value:t}=e.target;if("value"===s){const e=Number(t);isNaN(e)||d((t=>({...t,[s]:e})))}else d((e=>({...e,[s]:t})));o[s]&&p((e=>({...e,[s]:""})))},className:o.value?"border-red-500":""}),o.value&&e.jsx("p",{className:"text-red-500 text-sm",children:o.value})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"create-status",children:"Trạng thái"}),e.jsxs(T,{value:x.status,onValueChange:e=>{d((s=>({...s,status:e})))},children:[e.jsx(k,{id:"create-status",children:e.jsx(C,{placeholder:"Chọn trạng thái"})}),e.jsxs(O,{children:[e.jsx(S,{value:"HOAT_DONG",children:"Hoạt động"}),e.jsx(S,{value:"KHONG_HOAT_DONG",children:"Không hoạt động"})]})]})]}),e.jsxs(DialogFooter,{children:[e.jsx(r,{type:"button",variant:"outline",onClick:a,children:"Hủy"}),e.jsx(r,{type:"submit",disabled:n.isPending,children:n.isPending?"Đang xử lý...":"Thêm kích cỡ"})]})]})]})}const G=()=>e.jsx(_,{});export{G as default};
