import{j as e}from"./ui-vendor-CFM_MCUz.js";import{u as s,r as n}from"./react-vendor-B55MjJUH.js";import{u as r}from"./useAuth-CsiutREq.js";import{u as t}from"./useToast-DwJRzuOq.js";import{C as i,c as a,a as d,b as c,d as l}from"./card-ClEzRAeX.js";import{B as m}from"./badge-BeHegjHt.js";import{f as h}from"./utils-vendor-C6znz4jh.js";import{l as o}from"./index-DwIVA3Vd.js";import"./index-BHeY-5EX.js";import"./icons-vendor-BrsZP2ku.js";import"./query-vendor-CBwfxcof.js";import"./heavy-vendor-BfN2pHnQ.js";const x=()=>{const x=s(),{user:j}=r(),{showToast:u}=t(),[p,g]=n.useState([]),[f,v]=n.useState(!0);n.useEffect((()=>{(async()=>{try{if(!(null==j?void 0:j._id))return void x("/login");const e=await fetch(`/api/orders?customer=${j._id}`),s=await e.json();if(!s.success)throw new Error(s.message||"Không thể tải danh sách đơn hàng");g(s.data)}catch(e){u({title:"Lỗi",message:e.message||"Đã có lỗi xảy ra khi tải đơn hàng",type:"error"})}finally{v(!1)}})()}),[j,x,u]);const N=e=>{switch(e){case"pending":return"bg-yellow-500";case"processing":return"bg-blue-500";case"completed":return"bg-green-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},y=e=>{switch(e){case"pending":return"Chờ xác nhận";case"processing":return"Đang xử lý";case"completed":return"Hoàn thành";case"cancelled":return"Đã hủy";default:return e}};return f?e.jsx("div",{className:"container max-w-6xl py-8 flex items-center justify-center",children:e.jsx("div",{children:"Đang tải..."})}):e.jsxs("div",{className:"container max-w-6xl py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Đơn hàng của tôi"}),0===p.length?e.jsx(i,{children:e.jsx(a,{className:"py-8",children:e.jsx("div",{className:"text-center text-muted-foreground",children:"Bạn chưa có đơn hàng nào"})})}):e.jsx("div",{className:"space-y-4",children:p.map((s=>e.jsxs(i,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>x(`/orders/${s._id}`),children:[e.jsx(d,{className:"pb-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(c,{className:"text-lg",children:["Đơn hàng #",s._id.slice(-6)]}),e.jsx(l,{children:h(new Date(s.createdAt),"dd/MM/yyyy HH:mm",{locale:o})})]}),e.jsx(m,{className:`${N(s.status)} text-white`,children:y(s.status)})]})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Thông tin giao hàng"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.shippingAddress.name,e.jsx("br",{}),s.shippingAddress.phoneNumber,e.jsx("br",{}),s.shippingAddress.specificAddress]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Chi tiết thanh toán"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Phương thức:"}),e.jsx("span",{children:"COD"===s.paymentMethod?"Thanh toán khi nhận hàng":"VNPay"})]}),e.jsxs("div",{className:"flex justify-between font-medium mt-2",children:[e.jsx("span",{children:"Tổng tiền:"}),e.jsxs("span",{children:["$",s.total.toFixed(2)]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Sản phẩm"}),e.jsx("div",{className:"space-y-2",children:s.items.map(((s,n)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded relative overflow-hidden",children:e.jsx("img",{src:s.product.image,alt:s.product.name,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.product.name}),e.jsxs("div",{className:"flex justify-between mt-1 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["x",s.quantity]}),e.jsxs("span",{children:["$",s.price.toFixed(2)]})]})]})]},n)))})]})]})})]},s._id)))})]})};export{x as default};
