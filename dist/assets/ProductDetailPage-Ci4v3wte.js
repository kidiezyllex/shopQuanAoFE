import{j as e}from"./ui-vendor-CFM_MCUz.js";import{r as a}from"./react-vendor-B55MjJUH.js";import{u as s}from"./useCartStore-nn8gyhXY.js";import{j as t,U as i,t as n,B as r,C as l,x as o,E as d,ag as c,ah as m,ai as x,aj as h,K as p,L as u,a4 as v,ak as g,al as f,am as j,an as b,J as N}from"./icons-vendor-BrsZP2ku.js";import{C as y}from"./CartSheet-B8eaF0U0.js";import{b as w,u as I}from"./product-BXJPBtky.js";import{u as z}from"./promotion-DDJnNtmQ.js";import{c as k,a as _}from"./promotions-CtwgNWvY.js";import{l as C,B as P,y as S}from"./index-BHeY-5EX.js";import{S as T}from"./skeleton-4G_X8bY4.js";import{T as D,b as H,c as $,a as A}from"./tabs-z4DSy6tE.js";import{B as M,a as q,b as B,c as L,d as V,e as E}from"./breadcrumb-CP4jYkI2.js";import{B as G}from"./badge-BeHegjHt.js";import{C as K}from"./card-ClEzRAeX.js";import{m as F,A as O}from"./heavy-vendor-BfN2pHnQ.js";import"./middleware-DTCYSWSl.js";import"./scroll-area-CfH0A0Iz.js";import"./separator-CIUDwsOv.js";import"./useToast-DwJRzuOq.js";import"./formatters-BtOGY0AI.js";import"./voucher-C38MW_cY.js";import"./query-vendor-CBwfxcof.js";import"./dialog-Va24CY58.js";const X=({className:n})=>{const{totalItems:r}=s(),[l,o]=a.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`relative cursor-pointer ${n||""}`,onClick:()=>o(!0),"aria-label":"Giỏ hàng",children:[e.jsx(t,{path:i,size:1,className:n||"text-foreground"}),r>0&&e.jsx("div",{className:"absolute -top-3 -right-3 bg-extra text-primary-foreground rounded-full w-5 h-5 flex items-center justify-center text-xs font-medium",children:r>99?"99+":r})]}),e.jsx(y,{open:l,onOpenChange:o})]})};if("undefined"!=typeof document){const e=document.createElement("style");e.type="text/css",e.innerText="\n  .cursor-zoom-in {\n    cursor: zoom-in;\n  }\n  .cursor-zoom-in:hover {\n    cursor: zoom-in;\n  }\n  .cursor-none {\n    cursor: none !important;\n  }\n  .zoom-container:hover .zoom-lens {\n    opacity: 1;\n    transform: scale(1);\n  }\n  .zoom-preview {\n    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  }\n  .zoom-lens {\n    transition: all 0.1s ease-out;\n    backdrop-filter: blur(1px);\n  }\n  .zoom-lens::before {\n    content: '';\n    position: absolute;\n    inset: 0;\n    border-radius: 50%;\n    background: linear-gradient(45deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));\n    pointer-events: none;\n  }\n",document.head.appendChild(e)}const Y=({product:t,promotionsData:i})=>{var r,l,o,d;const{addToCart:c}=s(),[m,x]=a.useState(!1),h=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onHoverStart:()=>x(!0),onHoverEnd:()=>x(!1),children:e.jsxs(K,{className:"group overflow-hidden border rounded-lg hover:shadow-2xl shadow-lg transition-all duration-500 h-full flex flex-col transform hover:-translate-y-3 bg-white relative backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-lg z-10 pointer-events-none"}),e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-gray-50 via-white to-gray-100 rounded-t-2xl",children:[e.jsx("a",{href:`/products/${t.name.toLowerCase().replace(/\s+/g,"-")}-${t.id}`,className:"block",children:e.jsx("div",{className:"aspect-square overflow-hidden relative flex items-center justify-center",children:e.jsx(F.div,{className:"w-full h-full relative",whileHover:{scale:1.1},transition:{duration:.6,ease:"easeOut"},children:e.jsx("img",{src:C(null==(o=null==(l=null==(r=t.variants)?void 0:r[0])?void 0:l.images)?void 0:o[0])||"/placeholder.svg",alt:t.name,className:"object-contain w-full h-full drop-shadow-2xl filter group-hover:brightness-110 transition-all duration-500",sizes:"(max-width: 768px) 50vw, 25vw",draggable:"false"})})})}),e.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2 z-20",children:[t.isNew&&e.jsx(F.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.5,delay:.2},className:"bg-gradient-to-r from-emerald-500 to-teal-400 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-xl border-2 border-white/50 backdrop-blur-sm",children:"✨ Mới"}),(()=>{var a,s;if((null==(a=null==i?void 0:i.data)?void 0:a.promotions)&&(null==(s=t.variants)?void 0:s[0])){const a=k(t.id,t.variants[0].price,i.data.promotions);if(a.discountPercent>0)return e.jsxs(F.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{duration:.5,delay:.3},className:"bg-gradient-to-r from-green-500 via-emerald-500 to-lime-500 text-white text-xs font-bold px-3 rounded-full shadow-xl border border-white/50 backdrop-blur-sm animate-pulse flex-shrink-0 w-fit flex items-center justify-center gap-1",children:["💥",e.jsxs("span",{className:"text-base",children:["-",a.discountPercent,"%"]})]})}return null})()]}),e.jsxs(F.div,{className:"absolute right-2 top-2 transform -translate-y-1/2 flex flex-col gap-4 z-30",initial:{x:60,opacity:0},animate:{x:m?0:60,opacity:m?1:0},transition:{duration:.4,ease:"easeOut"},children:[e.jsx(F.div,{whileHover:{scale:1.15},whileTap:{scale:.95},children:e.jsx(P,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10 bg-white/90 backdrop-blur-md hover:!bg-primary hover:text-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300 group/btn",onClick:e=>{e.preventDefault(),(()=>{var e,a,s,n,r,l,o,d,m,x;if(!(null==(e=t.variants)?void 0:e[0]))return;const h=t.variants[0];if(0===h.stock)return void S.error("Sản phẩm đã hết hàng");let p,u=h.price,v=0,g=!1;if(null==(a=null==i?void 0:i.data)?void 0:a.promotions){const e=k(t.id,h.price,i.data.promotions);e.discountPercent>0&&(u=e.discountedPrice,p=e.originalPrice,v=e.discountPercent,g=!0)}const f={id:h.id,productId:t.id,name:t.name,price:u,originalPrice:p,discountPercent:v,hasDiscount:g,image:(null==(s=h.images)?void 0:s[0])||"",quantity:1,slug:t.code,brand:"string"==typeof t.brand?t.brand:t.brand.name,size:null==(n=h.sizeId)?void 0:n.code,colors:[(null==(r=h.colorId)?void 0:r.name)||"Default"],stock:h.stock,colorId:(null==(l=h.colorId)?void 0:l.id)||"",sizeId:(null==(o=h.sizeId)?void 0:o.id)||"",colorName:(null==(d=h.colorId)?void 0:d.name)||"Default",sizeName:(null==(m=h.sizeId)?void 0:m.name)||(null==(x=h.sizeId)?void 0:x.code)||""};c(f,1),S.success("Đã thêm sản phẩm vào giỏ hàng")})()},"aria-label":"Thêm vào giỏ hàng",children:e.jsx(n.Icon,{path:u,size:.7,className:"group-hover/btn:animate-bounce"})})}),e.jsx(F.div,{whileHover:{scale:1.15},whileTap:{scale:.95},children:e.jsx(P,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10 bg-white/90 backdrop-blur-md hover:!bg-pink-500 hover:text-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300 group/btn",onClick:e=>{e.preventDefault(),S.success("Đã thêm vào danh sách yêu thích")},"aria-label":"Yêu thích",children:e.jsx(n.Icon,{path:p,size:.7,className:"group-hover/btn:animate-pulse"})})}),e.jsx(F.div,{whileHover:{scale:1.15},whileTap:{scale:.95},children:e.jsx(P,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10 bg-white/90 backdrop-blur-md hover:!bg-primary hover:text-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300 group/btn",onClick:e=>{e.preventDefault(),window.location.href=`/products/${t.name.toLowerCase().replace(/\s+/g,"-")}-${t.id}`},"aria-label":"Xem nhanh",children:e.jsx(n.Icon,{path:N,size:.7,className:"group-hover/btn:animate-ping"})})})]})]}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow bg-gradient-to-b from-white via-gray-50/30 to-white border-t border-gray-100/50 rounded-b-2xl relative",children:[e.jsxs("div",{className:"text-xs text-primary/80 mb-2 uppercase tracking-wider font-bold flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-primary to-pink-400 animate-pulse"}),e.jsx("span",{className:"bg-gradient-to-r from-primary to-pink-500 bg-clip-text text-transparent",children:"string"==typeof t.brand?t.brand:null==(d=t.brand)?void 0:d.name})]}),e.jsx("a",{href:`/products/${t.name.toLowerCase().replace(/\s+/g,"-")}-${t.id}`,className:"hover:text-primary transition-colors group/a",children:e.jsx("h3",{className:"font-bold text-base mb-3 line-clamp-2 leading-tight group-hover:text-primary/90 transition-colors duration-300 text-maintext group-hover/link:underline decoration-primary/50 underline-offset-2",children:t.name})}),e.jsxs("div",{className:"mt-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F.div,{className:"font-extrabold text-lg text-active",whileHover:{scale:1.05},transition:{duration:.2},children:(()=>{var e,a,s;if((null==(e=null==i?void 0:i.data)?void 0:e.promotions)&&(null==(a=t.variants)?void 0:a[0])){const e=k(t.id,t.variants[0].price,i.data.promotions);if(e.discountPercent>0)return h(e.discountedPrice)}return(null==(s=t.variants)?void 0:s[0])&&h(t.variants[0].price)})()}),(()=>{var a,s;if((null==(a=null==i?void 0:i.data)?void 0:a.promotions)&&(null==(s=t.variants)?void 0:s[0])){const a=k(t.id,t.variants[0].price,i.data.promotions);if(a.discountPercent>0)return e.jsx("div",{className:"text-xs text-maintext line-through font-medium bg-gray-100 px-2 py-1 rounded-sm italic",children:h(a.originalPrice)})}return null})()]}),t.variants&&t.variants.length>0&&e.jsxs("div",{className:"flex flex-col gap-1 items-start justify-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-maintext/70 font-semibold",children:"Màu sắc:"}),e.jsxs("div",{className:"flex gap-1 text-sm",children:[Array.from(new Set(t.variants.map((e=>{var a;return null==(a=e.colorId)?void 0:a.id})).filter(Boolean))).slice(0,4).map(((a,s)=>{const i=t.variants.find((e=>{var s;return(null==(s=e.colorId)?void 0:s.id)===a})),n=(null==i?void 0:i.colorId)||{code:"#000000",name:"Default"};return e.jsx(F.div,{className:"w-4 h-4 rounded-full border-2 border-white shadow-lg ring-2 ring-gray-200 cursor-pointer",style:{backgroundColor:n.code},title:n.name,whileHover:{scale:1.3,rotate:360},transition:{duration:.3}},s)})),Array.from(new Set(t.variants.map((e=>{var a;return null==(a=e.colorId)?void 0:a.id})).filter(Boolean))).length>4&&e.jsxs(F.span,{className:"text-xs text-maintext ml-1 bg-gray-100 px-2 py-1 rounded-full font-medium",whileHover:{scale:1.1},children:["+",Array.from(new Set(t.variants.map((e=>{var a;return null==(a=e.colorId)?void 0:a.id})).filter(Boolean))).length-4]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-maintext/70 font-semibold",children:"Kích thước:"}),e.jsx("div",{className:"flex gap-1 text-maintext text-sm",children:Array.from(new Set(t.variants.map((e=>"object"==typeof e.sizeId?e.sizeId.value:e.sizeId)))).join(", ")})]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary/20 via-pink-400/20 to-orange-400/20 rounded-b-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})]})})};function U(){var t;const i=useParams().slug,[N,y]=a.useState(""),{data:U,isLoading:Z}=w(N),{data:J}=I({limit:8}),{data:W}=z({status:"HOAT_DONG"}),{addToCart:Q}=s(),[R,ee]=a.useState(null),[ae,se]=a.useState(""),[te,ie]=a.useState(""),[ne,re]=a.useState(1),[le,oe]=a.useState(0),[de,ce]=a.useState(null),me=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);a.useEffect((()=>{if("string"==typeof i){const e=i.split("-").pop();e&&y(e)}}),[i]),a.useEffect((()=>{var e,a;if((null==(a=null==(e=null==U?void 0:U.data)?void 0:e.variants)?void 0:a.length)&&U.data.variants.length>0){const e=U.data.variants[0];ee(e),se(e.colorId.id),ie(e.sizeId.id)}}),[U]),a.useEffect((()=>{var e;if((null==U?void 0:U.data)&&R&&(null==(e=null==W?void 0:W.data)?void 0:e.promotions)){const e=k(U.data.id,R.price,W.data.promotions);ce(e)}else ce(null)}),[U,R,W]);const xe=e=>{if(!R)return;const a=R.stock||0;re(Math.max(1,Math.min(e,a)))},he=a.useMemo((()=>{var e,a;if(!(null==(e=null==J?void 0:J.data)?void 0:e.products)||!(null==U?void 0:U.data))return[];let s=J.data.products.filter((e=>e.id!==U.data.id)).slice(0,4);return(null==(a=null==W?void 0:W.data)?void 0:a.promotions)&&(s=_(s,W.data.promotions)),s}),[J,null==U?void 0:U.data,W]);if(Z)return e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"w-full lg:w-3/5",children:[e.jsx(T,{className:"aspect-square w-full rounded-xl"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mt-4",children:[...Array(5)].map(((a,s)=>e.jsx(T,{className:"aspect-square w-full rounded-lg"},s)))})]}),e.jsxs("div",{className:"w-full lg:w-2/5 space-y-4",children:[e.jsx(T,{className:"h-12 w-3/4"}),e.jsx(T,{className:"h-8 w-1/2"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{className:"h-4 w-full"}),e.jsx(T,{className:"h-4 w-3/4"})]}),e.jsx("div",{className:"flex gap-2 pt-4",children:[...Array(4)].map(((a,s)=>e.jsx(T,{className:"h-12 w-12 rounded-full"},s)))}),e.jsx("div",{className:"flex gap-2",children:[...Array(5)].map(((a,s)=>e.jsx(T,{className:"h-12 w-16"},s)))}),e.jsxs("div",{className:"pt-4 flex gap-4",children:[e.jsx(T,{className:"h-14 w-40"}),e.jsx(T,{className:"h-14 w-full"})]})]})]})});const pe=null==U?void 0:U.data;if(!pe)return null;const ue="string"==typeof pe.brand?pe.brand:pe.brand.name;"string"==typeof pe.brand?pe.brand:pe.brand.name.toLowerCase().replace(/\s+/g,"-");const ve="string"==typeof pe.category?pe.category:pe.category.name,ge="string"==typeof pe.material?pe.material:pe.material.name;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50/50 to-white",children:[e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(M,{className:"mb-4",children:e.jsxs(q,{children:[e.jsx(B,{children:e.jsx(L,{href:"/",className:"!text-maintext hover:!text-maintext transition-colors",children:"Trang chủ"})}),e.jsx(V,{className:"!text-maintext hover:!text-maintext"}),e.jsx(B,{children:e.jsx(L,{href:"/products",className:"!text-maintext hover:!text-maintext transition-colors",children:"Tất cả sản phẩm"})}),e.jsx(V,{className:"!text-maintext hover:!text-maintext"}),e.jsx(B,{children:e.jsx(E,{className:"!text-maintext hover:!text-maintext",children:pe.name})})]})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs(F.div,{className:"w-full lg:w-3/5",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},children:[e.jsx("div",{className:"relative aspect-square rounded-2xl overflow-hidden bg-gradient-to-br from-gray-50 to-white border shadow-lg",children:R&&R.images&&R.images.length>0?e.jsxs(e.Fragment,{children:[e.jsx("imgZoom",{src:C(R.images[le]),alt:pe.name,className:"aspect-square"}),R.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"secondary",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 rounded-full opacity-80 hover:opacity-100 bg-white/90 hover:bg-white shadow-xl border-0 backdrop-blur-sm z-20",onClick:()=>{R&&R.images&&0!==R.images.length&&oe((e=>0===e?R.images.length-1:e-1))},children:e.jsx(n.Icon,{path:r,size:1})}),e.jsx(P,{variant:"secondary",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 rounded-full opacity-80 hover:opacity-100 bg-white/90 hover:bg-white shadow-xl border-0 backdrop-blur-sm z-20",onClick:()=>{R&&R.images&&0!==R.images.length&&oe((e=>e===R.images.length-1?0:e+1))},children:e.jsx(n.Icon,{path:l,size:1})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-maintext",children:"Không có hình ảnh"})})}),R&&R.images&&R.images.length>1&&e.jsx("div",{className:"grid grid-cols-5 gap-4 mt-4",children:R.images.map(((a,s)=>e.jsx(F.div,{onClick:()=>(e=>{oe(e)})(s),className:`\n                      relative aspect-square rounded-xl overflow-hidden cursor-pointer\n                      border-2 transition-all duration-300 hover:opacity-80\n                      ${le===s?"border-primary ring-2 ring-primary/20 shadow-lg scale-105":"border-gray-200 hover:border-gray-300"}\n                    `,whileHover:{scale:le===s?1.05:1.02},whileTap:{scale:.98},children:e.jsx("img",{src:C(a),alt:`${pe.name} - ${s+1}`,className:"object-contain p-2",sizes:"(max-width: 768px) 20vw, 10vw"})},s)))})]}),e.jsxs(F.div,{className:"w-full lg:w-2/5 space-y-4",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"font-mono border h-[22px] bg-gray-100 px-3 flex items-center justify-center text-primary text-sm font-medium rounded-full",children:pe.code}),e.jsx(G,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/20",children:ue}),e.jsx(G,{variant:"outline",className:"!text-maintext",children:ve})]}),e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-maintext leading-tight",children:pe.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map(((a,s)=>e.jsx(n.Icon,{path:s<4?o:d,size:.7,className:s<4?"text-yellow-400":"text-gray-300"},s)))}),e.jsx("span",{className:"text-sm !text-maintext",children:"(4.0) • 128 đánh giá"})]})]}),e.jsx(K,{className:"p-4 bg-gradient-to-r from-primary/5 to-secondary/5 border-primary/20",children:e.jsxs("div",{className:"space-y-4",children:[de&&de.discountPercent>0&&e.jsxs(F.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{duration:.5},className:"bg-gradient-to-r from-green-500 via-emerald-500 to-lime-500 text-white text-sm font-bold px-4 py-2 rounded-full shadow-xl border border-white/50 backdrop-blur-sm animate-pulse flex-shrink-0 w-fit flex items-center justify-center gap-2",children:["💥",e.jsxs("span",{className:"text-lg",children:["-",de.discountPercent,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(F.div,{className:"text-4xl font-bold text-primary",whileHover:{scale:1.05},transition:{duration:.2},children:de&&de.discountPercent>0?me(de.discountedPrice):R&&me(R.price)}),de&&de.discountPercent>0&&e.jsx("div",{className:"text-xl text-maintext line-through font-medium bg-gray-100 px-3 py-2 rounded-lg",children:me(de.originalPrice)})]}),de&&de.discountPercent>0&&e.jsxs("div",{className:"text-sm text-green-600 font-medium space-y-1",children:[e.jsxs("div",{children:["🎉 Áp dụng khuyến mãi: ",null==(t=de.appliedPromotion)?void 0:t.name]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-maintext",children:[e.jsxs("span",{children:["Giá gốc: ",e.jsx("span",{className:"line-through",children:me(de.originalPrice)})]}),e.jsx("span",{children:"→"}),e.jsxs("span",{className:"text-green-600 font-semibold",children:["Giá sau giảm: ",me(de.discountedPrice)]})]})]}),(!de||0===de.discountPercent)&&R&&e.jsxs("div",{className:"text-sm text-maintext",children:["Giá bán: ",me(R.price)]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n.Icon,{path:c,size:1,className:"!text-maintext"}),e.jsx("span",{className:"font-semibold text-maintext",children:"Màu sắc"})]}),(null==R?void 0:R.colorId)&&e.jsx("span",{className:"text-sm !text-maintext bg-gray-100 px-3 py-1 rounded-full",children:R.colorId.name})]}),e.jsx("div",{className:"flex flex-wrap gap-4",children:pe.variants.filter(((e,a,s)=>a===s.findIndex((a=>a.colorId.id===e.colorId.id)))).map((a=>e.jsx(F.button,{onClick:()=>(e=>{var a,s;se(e);const t=null==(a=null==U?void 0:U.data)?void 0:a.variants.find((a=>a.colorId.id===e&&a.sizeId.id===te));if(t)ee(t),oe(0);else{const a=null==(s=null==U?void 0:U.data)?void 0:s.variants.find((a=>a.colorId.id===e));a&&(ee(a),ie(a.sizeId.id),oe(0))}})(a.colorId.id),className:`\n                        relative group flex items-center justify-center w-10 h-10 rounded-full\n                        transition-all duration-300 border-2\n                        ${ae===a.colorId.id?"border-primary ring-4 ring-primary/20 scale-110":"border-gray-200 hover:border-gray-300 hover:scale-105"}\n                      `,style:{backgroundColor:a.colorId.code},title:a.colorId.name,whileHover:{scale:ae===a.colorId.id?1.1:1.05},whileTap:{scale:.95},children:ae===a.colorId.id&&e.jsx(n.Icon,{path:m,size:1,className:"text-white drop-shadow-lg"})},a.colorId.id)))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n.Icon,{path:x,size:1,className:"!text-maintext"}),e.jsx("span",{className:"font-semibold text-maintext",children:"Kích thước"})]}),(null==R?void 0:R.sizeId)&&e.jsx("span",{className:"text-sm !text-maintext bg-gray-100 px-3 py-1 rounded-full",children:R.sizeId.value})]}),e.jsx("div",{className:"flex flex-wrap gap-4",children:Array.from(new Set(pe.variants.map((e=>e.sizeId.id)))).map((a=>{var s;const t=pe.variants.find((e=>e.sizeId.id===a)),i=pe.variants.find((e=>e.colorId.id===ae&&e.sizeId.id===a)),n=!!i&&i.stock>0;return e.jsx(P,{variant:te===a?"default":"outline",size:"icon",onClick:()=>(e=>{var a;ie(e);const s=null==(a=null==U?void 0:U.data)?void 0:a.variants.find((a=>a.colorId.id===ae&&a.sizeId.id===e));s&&ee(s)})(a),disabled:!n,className:n?"":"opacity-50 cursor-not-allowed",title:n?"":"Không có sẵn cho màu này",children:null==(s=null==t?void 0:t.sizeId)?void 0:s.value},a)}))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n.Icon,{path:h,size:1,className:"!text-maintext"}),e.jsx("span",{className:"font-semibold text-maintext",children:"Số lượng"})]}),R&&e.jsxs("span",{className:"text-sm !text-maintext",children:["Còn ",e.jsx("span",{className:"font-semibold text-primary",children:R.stock})," sản phẩm"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"icon",onClick:()=>xe(ne-1),disabled:ne<=1,children:"-"}),e.jsx("div",{className:"w-9 h-9 flex items-center justify-center border text-center text-lg font-semibold bg-gray-50 rounded-sm",children:ne}),e.jsx(P,{variant:"outline",size:"icon",onClick:()=>xe(ne+1),disabled:!R||ne>=(R.stock||0),children:"+"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsxs(P,{variant:"outline",size:"lg",onClick:()=>S.success("Đã thêm vào danh sách yêu thích"),children:[e.jsx(n.Icon,{path:p,size:1,className:"mr-2"}),"Yêu thích"]}),e.jsxs(P,{size:"lg",onClick:()=>{var e;if(!R||!(null==U?void 0:U.data))return;if(0===R.stock)return void S.error("Sản phẩm đã hết hàng");if(ne>R.stock)return void S.error(`Chỉ còn ${R.stock} sản phẩm trong kho`);const a=de&&de.discountPercent>0?de.discountedPrice:R.price,s=de&&de.discountPercent>0?de.originalPrice:void 0,t={id:R.id,productId:U.data.id,name:U.data.name,price:a,originalPrice:s,discountPercent:(null==de?void 0:de.discountPercent)||0,hasDiscount:Boolean(de&&de.discountPercent>0),image:(null==(e=R.images)?void 0:e[0])||"",quantity:ne,slug:U.data.code,brand:"string"==typeof U.data.brand?U.data.brand:U.data.brand.name,size:R.sizeId.code,colors:[R.colorId.name],stock:R.stock,colorId:R.colorId.id,sizeId:R.sizeId.id,colorName:R.colorId.name,sizeName:R.sizeId.name||R.sizeId.code||""};Q(t,ne),S.success(`Đã thêm ${ne} sản phẩm vào giỏ hàng${s?" với giá ưu đãi":""}`)},disabled:!R||0===R.stock,children:[e.jsx(n.Icon,{path:u,size:1,className:"mr-2"}),"Thêm vào giỏ hàng"]})]}),e.jsx(K,{className:"p-4 bg-gray-50/50",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(n.Icon,{path:v,size:1,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-maintext",children:"Miễn phí vận chuyển"}),e.jsx("p",{className:"text-sm !text-maintext",children:"Đơn hàng từ 500k"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(n.Icon,{path:g,size:1,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-maintext",children:"Bảo hành chính hãng"}),e.jsx("p",{className:"text-sm !text-maintext",children:"12 tháng"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(n.Icon,{path:f,size:1,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-maintext",children:"Đổi trả dễ dàng"}),e.jsx("p",{className:"text-sm !text-maintext",children:"Trong 30 ngày"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(n.Icon,{path:j,size:1,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-maintext",children:"Thanh toán an toàn"}),e.jsx("p",{className:"text-sm !text-maintext",children:"Nhiều phương thức"})]})]})]})}),e.jsxs(K,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-maintext mb-4 flex items-center gap-2",children:[e.jsx(n.Icon,{path:b,size:1,className:"text-primary"}),"Thông tin sản phẩm"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Thương hiệu"}),e.jsx("span",{className:"font-medium text-maintext",children:ue})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Danh mục"}),e.jsx("span",{className:"font-medium text-maintext",children:ve})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Chất liệu"}),e.jsx("span",{className:"font-medium text-maintext",children:ge})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"!text-maintext",children:"Trọng lượng"}),e.jsxs("span",{className:"font-medium text-maintext",children:[pe.weight,"g"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Mã sản phẩm"}),e.jsx("span",{className:"font-mono font-medium text-primary",children:pe.code})]}),R&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"!text-maintext",children:"Giá hiện tại"}),e.jsx("span",{className:"font-medium text-primary",children:de&&de.discountPercent>0?me(de.discountedPrice):me(R.price)})]})]})]})]})]}),e.jsx(F.div,{className:"mt-20",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsxs(D,{defaultValue:"description",className:"w-full",children:[e.jsxs(H,{className:"w-full sm:w-auto border-b bg-transparent h-auto p-0 rounded-none",children:[e.jsx($,{value:"description",className:"flex-1 sm:flex-none data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none pb-4 font-semibold text-maintext",children:"Mô tả sản phẩm"}),e.jsx($,{value:"specifications",className:"flex-1 sm:flex-none data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none pb-4 font-semibold text-maintext",children:"Thông số kỹ thuật"}),e.jsx($,{value:"reviews",className:"flex-1 sm:flex-none data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none pb-4 font-semibold",children:"Đánh giá (128)"})]}),e.jsx(A,{value:"description",className:"mt-8",children:e.jsx(K,{className:"p-8",children:e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:pe.description},className:"text-maintext leading-relaxed"})})})}),e.jsx(A,{value:"specifications",className:"mt-8",children:e.jsx(K,{className:"p-8",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg mb-4 text-maintext",children:"Thông tin cơ bản"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Thương hiệu"}),e.jsx("span",{className:"font-medium",children:ue})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Danh mục"}),e.jsx("span",{className:"font-medium",children:ve})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Chất liệu"}),e.jsx("span",{className:"font-medium",children:ge})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"!text-maintext",children:"Trọng lượng"}),e.jsxs("span",{className:"font-medium",children:[pe.weight,"g"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg mb-4 text-maintext",children:"Thông tin biến thể"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Số màu sắc"}),e.jsxs("span",{className:"font-medium",children:[Array.from(new Set(pe.variants.map((e=>e.colorId.id)))).length," màu"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Số kích thước"}),e.jsxs("span",{className:"font-medium",children:[Array.from(new Set(pe.variants.map((e=>e.sizeId.id)))).length," size"]})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"!text-maintext",children:"Tổng tồn kho"}),e.jsxs("span",{className:"font-medium",children:[pe.variants.reduce(((e,a)=>e+a.stock),0)," sản phẩm"]})]})]})]})]})})}),e.jsx(A,{value:"reviews",className:"mt-8",children:e.jsx(K,{className:"p-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(n.Icon,{path:o,size:3,className:"text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-maintext mb-2",children:"Chưa có đánh giá"}),e.jsx("p",{className:"!text-maintext",children:"Hãy là người đầu tiên đánh giá sản phẩm này!"}),e.jsx(P,{className:"mt-4",children:"Viết đánh giá"})]})})})]})}),he.length>0&&e.jsxs(F.div,{className:"mt-20",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-maintext mb-4",children:"Sản phẩm tương tự"}),e.jsx("p",{className:"!text-maintext max-w-2xl mx-auto",children:"Khám phá những sản phẩm tương tự có thể bạn sẽ thích"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:e.jsx(O,{children:he.map(((a,s)=>e.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*s},children:e.jsx(Y,{product:a,promotionsData:W})},a.id)))})}),e.jsx("div",{className:"text-center mt-12",children:e.jsx(P,{variant:"outline",size:"lg",asChild:!0,children:e.jsx("a",{href:"/products",children:"Xem tất cả sản phẩm"})})})]})]}),e.jsx("div",{className:"fixed bottom-6 right-6 z-50 shadow-lg rounded-full bg-primary p-2 hover:bg-primary/80 transition-all duration-300",children:e.jsx(X,{className:"text-white"})})]})}const Z=()=>e.jsx(U,{});export{Z as default};
