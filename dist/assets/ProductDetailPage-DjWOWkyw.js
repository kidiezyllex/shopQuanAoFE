import{a as p,j as e,I as oe,T as de,a2 as k,m as x,ar as D,B as N,k as h,h as me,i as xe,c as te,n as he,as as ue,at as pe,au as ge,av as fe,a6 as A,u as le,v as ce,a9 as be,aw as je,ax as ve,ay as ye,az as Ne,A as we,ao as Z,t as Ie}from"./index-Dpx_4rWJ.js";import{u as ee}from"./useCartStore-XJ4QOmkb.js";import{C as ze}from"./CartSheet-B8_e3pI0.js";import{b as ke,u as Pe}from"./product-SA3ZOUlJ.js";import{u as Ce}from"./promotion-BheM1RSV.js";import{c as _,a as Se}from"./promotions-BLXdZVKB.js";import{g as O}from"./sizeMapping-RjPPY2bw.js";import{T as Te,b as $e,c as W,a as U}from"./tabs-BXj1bKUw.js";import{B as Me,a as He,b as J,c as ie,d as ne,e as Ae}from"./breadcrumb-CJedQ5QG.js";import{B as re}from"./badge-CA2Kv9aL.js";import{C as H}from"./card-fT6uSY2F.js";import"./middleware-C0Ya4A5M.js";import"./dialog-BuHyDe_9.js";import"./createLucideIcon-BdgKQErZ.js";import"./scroll-area-jH8Oe1ZO.js";import"./index-BdQq_4o_.js";import"./separator-vZGg2kit.js";import"./useToast-DwXsNIYN.js";import"./formatters-BzOSFyyi.js";import"./voucher-C7mr4xZE.js";const Be=({className:t})=>{const{totalItems:m}=ee(),[T,v]=p.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`relative cursor-pointer ${t||""}`,onClick:()=>v(!0),"aria-label":"Giỏ hàng",children:[e.jsx(oe,{path:de,size:1,className:t||"text-foreground"}),m>0&&e.jsx("div",{className:"absolute -top-3 -right-3 bg-extra text-primary-foreground rounded-full w-5 h-5 flex items-center justify-center text-xs font-medium",children:m>99?"99+":m})]}),e.jsx(ze,{open:T,onOpenChange:v})]})},Le=`
  .cursor-zoom-in {
    cursor: zoom-in;
  }
  .cursor-zoom-in:hover {
    cursor: zoom-in;
  }
  .cursor-none {
    cursor: none !important;
  }
  .zoom-container:hover .zoom-lens {
    opacity: 1;
    transform: scale(1);
  }
  .zoom-preview {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  }
  .zoom-lens {
    transition: all 0.1s ease-out;
    backdrop-filter: blur(1px);
  }
  .zoom-lens::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 50%;
    background: linear-gradient(45deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));
    pointer-events: none;
  }
`;if(typeof document<"u"){const t=document.createElement("style");t.type="text/css",t.innerText=Le,document.head.appendChild(t)}const Ee=({src:t,alt:m,className:T})=>{const[v,n]=p.useState(!1),[w,P]=p.useState({x:0,y:0}),[f,q]=p.useState({x:0,y:0}),[s,C]=p.useState(!1);p.useEffect(()=>{const o=()=>{C(window.innerWidth<768)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const z=()=>{s||n(!0)},$=()=>{n(!1)},i=o=>{if(s)return;const g=o.currentTarget.getBoundingClientRect(),I=o.clientX-g.left,y=o.clientY-g.top,l=I/g.width*100,M=y/g.height*100;P({x:l,y:M});const b=150,B=Math.max(b/2,Math.min(g.width-b/2,I)),L=Math.max(b/2,Math.min(g.height-b/2,y));q({x:B,y:L})},d=()=>{s&&n(!v)};return e.jsxs("div",{className:"relative overflow-visible group zoom-container",children:[e.jsxs("div",{className:`relative ${T} transition-all duration-300 ${!s&&!v?"cursor-zoom-in":""} ${!s&&v?"cursor-none":""}`,onMouseEnter:z,onMouseLeave:$,onMouseMove:i,onTouchStart:d,children:[e.jsx("img",{src:t,alt:m,draggable:"false",className:"object-contain p-4 transition-transform duration-300"}),v&&!s&&e.jsxs(x.div,{className:"absolute pointer-events-none border-4 border-white rounded-full shadow-2xl z-30 overflow-hidden zoom-lens",style:{width:"150px",height:"150px",left:`${f.x-75}px`,top:`${f.y-75}px`,boxShadow:"0 0 0 2px rgba(59, 130, 246, 0.8), 0 25px 50px -12px rgba(0, 0, 0, 0.25)"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2},children:[e.jsx("div",{className:"w-full h-full relative bg-white",style:{backgroundImage:`url(${t})`,backgroundSize:"400%",backgroundPosition:`${w.x}% ${w.y}%`,backgroundRepeat:"no-repeat"}}),e.jsx("div",{className:"absolute inset-2 border border-white/30 rounded-full pointer-events-none"})]})]}),v&&!s&&e.jsxs(x.div,{className:"absolute top-0 left-full ml-6 w-80 h-80 border-2 border-primary/20 bg-white rounded-xl overflow-hidden z-40 hidden lg:block zoom-preview",initial:{opacity:0,x:-20,scale:.95},animate:{opacity:1,x:0,scale:1},transition:{duration:.3,ease:"easeOut"},children:[e.jsx("div",{className:"w-full h-full relative bg-white",style:{backgroundImage:`url(${t})`,backgroundSize:"300%",backgroundPosition:`${w.x}% ${w.y}%`,backgroundRepeat:"no-repeat",imageRendering:"crisp-edges"}}),e.jsxs("div",{className:"absolute top-3 left-3 bg-primary/90 text-white px-3 py-1 rounded-full text-xs font-medium backdrop-blur-sm",children:[e.jsx(h.Icon,{path:Z,size:.7,className:"inline mr-1"}),"Zoom Preview"]}),e.jsx("div",{className:"absolute bottom-3 right-3 w-16 h-16 border-2 border-primary/30 rounded-lg bg-white/80 backdrop-blur-sm",children:e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full absolute transition-all duration-75",style:{left:`${w.x/100*56}px`,top:`${w.y/100*56}px`}})})]}),v&&s&&e.jsx(x.div,{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},onClick:()=>n(!1),children:e.jsxs(x.div,{className:"relative w-full max-w-lg aspect-square bg-white rounded-xl overflow-hidden",initial:{scale:.8},animate:{scale:1},transition:{duration:.3},children:[e.jsx("img",{src:t,alt:m,className:"object-contain p-4",draggable:"false"}),e.jsx(N,{variant:"secondary",size:"icon",className:"absolute top-4 right-4 rounded-full bg-white/90 hover:bg-white",onClick:()=>n(!1),children:"✕"}),e.jsx("div",{className:"absolute bottom-4 left-4 bg-primary/90 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Nhấn để đóng"})]})}),s&&e.jsxs(x.div,{className:"absolute bottom-2 right-2 bg-primary/90 text-white px-2 py-1 rounded text-xs font-medium opacity-70",initial:{opacity:0,y:10},animate:{opacity:.7,y:0},transition:{delay:1,duration:.5},children:[e.jsx(h.Icon,{path:Z,size:.7,className:"inline mr-1"}),"Nhấn để phóng to"]}),!s&&!v&&e.jsxs(x.div,{className:"absolute bottom-2 right-2 bg-black/70 text-white px-2 py-1 rounded text-xs font-medium opacity-0 group-hover:opacity-70 transition-opacity duration-300",initial:{opacity:0,y:10},animate:{opacity:0,y:0},whileHover:{opacity:.7},children:[e.jsx(h.Icon,{path:Z,size:.7,className:"inline mr-1"}),"Hover để phóng to"]})]})},Oe=({product:t,promotionsData:m})=>{var s,C,z,$;const{addToCart:T}=ee(),[v,n]=p.useState(!1),w=i=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(i),P=()=>{var l,M,b,B,L,F,G,K,Q,V,R;if(!((l=t.variants)!=null&&l[0]))return;const i=t.variants[0];if(i.stock===0){A.error("Sản phẩm đã hết hàng");return}let d=i.price,o,g=0,I=!1;if((M=m==null?void 0:m.data)!=null&&M.promotions){const c=_(t.id,i.price,m.data.promotions);c.discountPercent>0&&(d=c.discountedPrice,o=c.originalPrice,g=c.discountPercent,I=!0)}const y={id:i.id,productId:t.id,name:t.name,price:d,originalPrice:o,discountPercent:g,hasDiscount:I,image:((b=i.images)==null?void 0:b[0])||"",quantity:1,slug:t.code,brand:typeof t.brand=="string"?t.brand:t.brand.name,size:(B=i.sizeId)==null?void 0:B.code,colors:[((L=i.colorId)==null?void 0:L.name)||"Default"],stock:i.stock,colorId:((F=i.colorId)==null?void 0:F.id)||"",sizeId:((G=i.sizeId)==null?void 0:G.id)||"",colorName:((K=i.colorId)==null?void 0:K.name)||"Default",sizeName:(Q=i.sizeId)!=null&&Q.value?O(i.sizeId.value):((V=i.sizeId)==null?void 0:V.name)||((R=i.sizeId)==null?void 0:R.code)||""};T(y,1),A.success("Đã thêm sản phẩm vào giỏ hàng")},f=()=>{window.location.href=`/products/${t.name.toLowerCase().replace(/\s+/g,"-")}-${t.id}`},q=()=>{A.success("Đã thêm vào danh sách yêu thích")};return e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onHoverStart:()=>n(!0),onHoverEnd:()=>n(!1),children:e.jsxs(H,{className:"group overflow-hidden border rounded-lg hover:shadow-2xl shadow-lg transition-all duration-500 h-full flex flex-col transform hover:-translate-y-3 bg-white relative backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-lg z-10 pointer-events-none"}),e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-gray-50 via-white to-gray-100 rounded-t-2xl",children:[e.jsx("a",{href:`/products/${t.name.toLowerCase().replace(/\s+/g,"-")}-${t.id}`,className:"block",children:e.jsx("div",{className:"aspect-square overflow-hidden relative flex items-center justify-center",children:e.jsx(x.div,{className:"w-full h-full relative",whileHover:{scale:1.1},transition:{duration:.6,ease:"easeOut"},children:e.jsx("img",{src:D((z=(C=(s=t.variants)==null?void 0:s[0])==null?void 0:C.images)==null?void 0:z[0])||"/placeholder.svg",alt:t.name,className:"object-contain w-full h-full drop-shadow-2xl filter group-hover:brightness-110 transition-all duration-500",sizes:"(max-width: 768px) 50vw, 25vw",draggable:"false"})})})}),e.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2 z-20",children:[t.isNew&&e.jsx(x.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.5,delay:.2},className:"bg-gradient-to-r from-emerald-500 to-teal-400 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-xl border-2 border-white/50 backdrop-blur-sm",children:"✨ Mới"}),(()=>{var i,d;if((i=m==null?void 0:m.data)!=null&&i.promotions&&((d=t.variants)!=null&&d[0])){const o=_(t.id,t.variants[0].price,m.data.promotions);if(o.discountPercent>0)return e.jsxs(x.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{duration:.5,delay:.3},className:"bg-gradient-to-r from-green-500 via-emerald-500 to-lime-500 text-white text-xs font-bold px-3 rounded-full shadow-xl border border-white/50 backdrop-blur-sm animate-pulse flex-shrink-0 w-fit flex items-center justify-center gap-1",children:["💥",e.jsxs("span",{className:"text-base",children:["-",o.discountPercent,"%"]})]})}return null})()]}),e.jsxs(x.div,{className:"absolute right-2 top-2 transform -translate-y-1/2 flex flex-col gap-4 z-30",initial:{x:60,opacity:0},animate:{x:v?0:60,opacity:v?1:0},transition:{duration:.4,ease:"easeOut"},children:[e.jsx(x.div,{whileHover:{scale:1.15},whileTap:{scale:.95},children:e.jsx(N,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10 bg-white/90 backdrop-blur-md hover:!bg-primary hover:text-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300 group/btn",onClick:i=>{i.preventDefault(),P()},"aria-label":"Thêm vào giỏ hàng",children:e.jsx(h.Icon,{path:ce,size:.7,className:"group-hover/btn:animate-bounce"})})}),e.jsx(x.div,{whileHover:{scale:1.15},whileTap:{scale:.95},children:e.jsx(N,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10 bg-white/90 backdrop-blur-md hover:!bg-pink-500 hover:text-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300 group/btn",onClick:i=>{i.preventDefault(),q()},"aria-label":"Yêu thích",children:e.jsx(h.Icon,{path:le,size:.7,className:"group-hover/btn:animate-pulse"})})}),e.jsx(x.div,{whileHover:{scale:1.15},whileTap:{scale:.95},children:e.jsx(N,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10 bg-white/90 backdrop-blur-md hover:!bg-primary hover:text-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300 group/btn",onClick:i=>{i.preventDefault(),f()},"aria-label":"Xem nhanh",children:e.jsx(h.Icon,{path:Ie,size:.7,className:"group-hover/btn:animate-ping"})})})]})]}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow bg-gradient-to-b from-white via-gray-50/30 to-white border-t border-gray-100/50 rounded-b-2xl relative",children:[e.jsxs("div",{className:"text-xs text-primary/80 mb-2 uppercase tracking-wider font-bold flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-primary to-pink-400 animate-pulse"}),e.jsx("span",{className:"bg-gradient-to-r from-primary to-pink-500 bg-clip-text text-transparent",children:typeof t.brand=="string"?t.brand:($=t.brand)==null?void 0:$.name})]}),e.jsx("a",{href:`/products/${t.name.toLowerCase().replace(/\s+/g,"-")}-${t.id}`,className:"hover:text-primary transition-colors group/a",children:e.jsx("h3",{className:"font-bold text-base mb-3 line-clamp-2 leading-tight group-hover:text-primary/90 transition-colors duration-300 text-maintext group-hover/link:underline decoration-primary/50 underline-offset-2",children:t.name})}),e.jsxs("div",{className:"mt-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x.div,{className:"font-extrabold text-lg text-active",whileHover:{scale:1.05},transition:{duration:.2},children:(()=>{var i,d,o;if((i=m==null?void 0:m.data)!=null&&i.promotions&&((d=t.variants)!=null&&d[0])){const g=_(t.id,t.variants[0].price,m.data.promotions);if(g.discountPercent>0)return w(g.discountedPrice)}return((o=t.variants)==null?void 0:o[0])&&w(t.variants[0].price)})()}),(()=>{var i,d;if((i=m==null?void 0:m.data)!=null&&i.promotions&&((d=t.variants)!=null&&d[0])){const o=_(t.id,t.variants[0].price,m.data.promotions);if(o.discountPercent>0)return e.jsx("div",{className:"text-xs text-maintext line-through font-medium bg-gray-100 px-2 py-1 rounded-sm italic",children:w(o.originalPrice)})}return null})()]}),t.variants&&t.variants.length>0&&e.jsxs("div",{className:"flex flex-col gap-1 items-start justify-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-maintext/70 font-semibold",children:"Màu sắc:"}),e.jsxs("div",{className:"flex gap-1 text-sm",children:[Array.from(new Set(t.variants.map(i=>{var d;return(d=i.colorId)==null?void 0:d.id}).filter(Boolean))).slice(0,4).map((i,d)=>{const o=t.variants.find(I=>{var y;return((y=I.colorId)==null?void 0:y.id)===i}),g=(o==null?void 0:o.colorId)||{code:"#000000",name:"Default"};return e.jsx(x.div,{className:"w-4 h-4 rounded-full border-2 border-white shadow-lg ring-2 ring-gray-200 cursor-pointer",style:{backgroundColor:g.code},title:g.name,whileHover:{scale:1.3,rotate:360},transition:{duration:.3}},d)}),Array.from(new Set(t.variants.map(i=>{var d;return(d=i.colorId)==null?void 0:d.id}).filter(Boolean))).length>4&&e.jsxs(x.span,{className:"text-xs text-maintext ml-1 bg-gray-100 px-2 py-1 rounded-full font-medium",whileHover:{scale:1.1},children:["+",Array.from(new Set(t.variants.map(i=>{var d;return(d=i.colorId)==null?void 0:d.id}).filter(Boolean))).length-4]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-maintext/70 font-semibold",children:"Kích thước:"}),e.jsx("div",{className:"flex gap-1 text-maintext text-sm",children:Array.from(new Set(t.variants.map(i=>typeof i.sizeId=="object"?O(i.sizeId.value):O(i.sizeId)))).join(", ")})]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary/20 via-pink-400/20 to-orange-400/20 rounded-b-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})]})})};function qe({params:t}){var ae;const m=t.slug,[T,v]=p.useState(""),{data:n,isLoading:w}=ke(T),{data:P}=Pe({limit:8}),{data:f}=Ce({status:"HOAT_DONG"}),{addToCart:q}=ee(),[s,C]=p.useState(null),[z,$]=p.useState(""),[i,d]=p.useState(""),[o,g]=p.useState(1),[I,y]=p.useState(0),[l,M]=p.useState(null),b=a=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a);p.useEffect(()=>{if(typeof m=="string"){const a=m.split("-").pop();a&&v(a)}},[m]),p.useEffect(()=>{var a,r;if((r=(a=n==null?void 0:n.data)==null?void 0:a.variants)!=null&&r.length&&n.data.variants.length>0){const u=n.data.variants[0];C(u),$(u.colorId.id),d(u.sizeId.id)}},[n]),p.useEffect(()=>{var a;if(n!=null&&n.data&&s&&((a=f==null?void 0:f.data)!=null&&a.promotions)){const r=_(n.data.id,s.price,f.data.promotions);M(r)}else M(null)},[n,s,f]);const B=a=>{var u,j;$(a);const r=(u=n==null?void 0:n.data)==null?void 0:u.variants.find(S=>S.colorId.id===a&&S.sizeId.id===i);if(r)C(r),y(0);else{const S=(j=n==null?void 0:n.data)==null?void 0:j.variants.find(E=>E.colorId.id===a);S&&(C(S),d(S.sizeId.id),y(0))}},L=a=>{var u;d(a);const r=(u=n==null?void 0:n.data)==null?void 0:u.variants.find(j=>j.colorId.id===z&&j.sizeId.id===a);r&&C(r)},F=()=>{var j;if(!s||!(n!=null&&n.data))return;if(s.stock===0){A.error("Sản phẩm đã hết hàng");return}if(o>s.stock){A.error(`Chỉ còn ${s.stock} sản phẩm trong kho`);return}const a=l&&l.discountPercent>0?l.discountedPrice:s.price,r=l&&l.discountPercent>0?l.originalPrice:void 0,u={id:s.id,productId:n.data.id,name:n.data.name,price:a,originalPrice:r,discountPercent:(l==null?void 0:l.discountPercent)||0,hasDiscount:!!(l&&l.discountPercent>0),image:((j=s.images)==null?void 0:j[0])||"",quantity:o,slug:n.data.code,brand:typeof n.data.brand=="string"?n.data.brand:n.data.brand.name,size:s.sizeId.code,colors:[s.colorId.name],stock:s.stock,colorId:s.colorId.id,sizeId:s.sizeId.id,colorName:s.colorId.name,sizeName:s.sizeId.value?O(s.sizeId.value):s.sizeId.name||s.sizeId.code||""};q(u,o),A.success(`Đã thêm ${o} sản phẩm vào giỏ hàng${r?" với giá ưu đãi":""}`)},G=a=>{y(a)},K=()=>{!s||!s.images||s.images.length===0||y(a=>a===0?s.images.length-1:a-1)},Q=()=>{!s||!s.images||s.images.length===0||y(a=>a===s.images.length-1?0:a+1)},V=a=>{if(!s)return;const r=s.stock||0;g(Math.max(1,Math.min(a,r)))},R=p.useMemo(()=>{var r,u;if(!((r=P==null?void 0:P.data)!=null&&r.products)||!(n!=null&&n.data))return[];let a=P.data.products.filter(j=>j.id!==n.data.id).slice(0,4);return(u=f==null?void 0:f.data)!=null&&u.promotions&&(a=Se(a,f.data.promotions)),a},[P,n==null?void 0:n.data,f]);if(w)return e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"w-full lg:w-3/5",children:[e.jsx(k,{className:"aspect-square w-full rounded-xl"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mt-4",children:[...Array(5)].map((a,r)=>e.jsx(k,{className:"aspect-square w-full rounded-lg"},r))})]}),e.jsxs("div",{className:"w-full lg:w-2/5 space-y-4",children:[e.jsx(k,{className:"h-12 w-3/4"}),e.jsx(k,{className:"h-8 w-1/2"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{className:"h-4 w-full"}),e.jsx(k,{className:"h-4 w-3/4"})]}),e.jsx("div",{className:"flex gap-2 pt-4",children:[...Array(4)].map((a,r)=>e.jsx(k,{className:"h-12 w-12 rounded-full"},r))}),e.jsx("div",{className:"flex gap-2",children:[...Array(5)].map((a,r)=>e.jsx(k,{className:"h-12 w-16"},r))}),e.jsxs("div",{className:"pt-4 flex gap-4",children:[e.jsx(k,{className:"h-14 w-40"}),e.jsx(k,{className:"h-14 w-full"})]})]})]})});const c=n==null?void 0:n.data;if(!c)return null;const X=typeof c.brand=="string"?c.brand:c.brand.name;typeof c.brand=="string"?c.brand:c.brand.name.toLowerCase().replace(/\s+/g,"-");const Y=typeof c.category=="string"?c.category:c.category.name,se=typeof c.material=="string"?c.material:c.material.name;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50/50 to-white",children:[e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(Me,{className:"mb-4",children:e.jsxs(He,{children:[e.jsx(J,{children:e.jsx(ie,{href:"/",className:"!text-maintext hover:!text-maintext transition-colors",children:"Trang chủ"})}),e.jsx(ne,{className:"!text-maintext hover:!text-maintext"}),e.jsx(J,{children:e.jsx(ie,{href:"/products",className:"!text-maintext hover:!text-maintext transition-colors",children:"Tất cả sản phẩm"})}),e.jsx(ne,{className:"!text-maintext hover:!text-maintext"}),e.jsx(J,{children:e.jsx(Ae,{className:"!text-maintext hover:!text-maintext",children:c.name})})]})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs(x.div,{className:"w-full lg:w-3/5",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},children:[e.jsx("div",{className:"relative aspect-square rounded-2xl overflow-hidden bg-gradient-to-br from-gray-50 to-white border shadow-lg",children:s&&s.images&&s.images.length>0?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{src:D(s.images[I]),alt:c.name,className:"aspect-square"}),s.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"secondary",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 rounded-full opacity-80 hover:opacity-100 bg-white/90 hover:bg-white shadow-xl border-0 backdrop-blur-sm z-20",onClick:K,children:e.jsx(h.Icon,{path:me,size:1})}),e.jsx(N,{variant:"secondary",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 rounded-full opacity-80 hover:opacity-100 bg-white/90 hover:bg-white shadow-xl border-0 backdrop-blur-sm z-20",onClick:Q,children:e.jsx(h.Icon,{path:xe,size:1})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-maintext",children:"Không có hình ảnh"})})}),s&&s.images&&s.images.length>1&&e.jsx("div",{className:"grid grid-cols-5 gap-4 mt-4",children:s.images.map((a,r)=>e.jsx(x.div,{onClick:()=>G(r),className:`
                      relative aspect-square rounded-xl overflow-hidden cursor-pointer
                      border-2 transition-all duration-300 hover:opacity-80
                      ${I===r?"border-primary ring-2 ring-primary/20 shadow-lg scale-105":"border-gray-200 hover:border-gray-300"}
                    `,whileHover:{scale:I===r?1.05:1.02},whileTap:{scale:.98},children:e.jsx("img",{src:D(a),alt:`${c.name} - ${r+1}`,className:"object-contain p-2",sizes:"(max-width: 768px) 20vw, 10vw"})},r))})]}),e.jsxs(x.div,{className:"w-full lg:w-2/5 space-y-4",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"font-mono border h-[22px] bg-gray-100 px-3 flex items-center justify-center text-primary text-sm font-medium rounded-full",children:c.code}),e.jsx(re,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/20",children:X}),e.jsx(re,{variant:"outline",className:"!text-maintext",children:Y})]}),e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-maintext leading-tight",children:c.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((a,r)=>e.jsx(h.Icon,{path:r<4?te:he,size:.7,className:r<4?"text-yellow-400":"text-gray-300"},r))}),e.jsx("span",{className:"text-sm !text-maintext",children:"(4.0) • 128 đánh giá"})]})]}),e.jsx(H,{className:"p-4 bg-gradient-to-r from-primary/5 to-secondary/5 border-primary/20",children:e.jsxs("div",{className:"space-y-4",children:[l&&l.discountPercent>0&&e.jsxs(x.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{duration:.5},className:"bg-gradient-to-r from-green-500 via-emerald-500 to-lime-500 text-white text-sm font-bold px-4 py-2 rounded-full shadow-xl border border-white/50 backdrop-blur-sm animate-pulse flex-shrink-0 w-fit flex items-center justify-center gap-2",children:["💥",e.jsxs("span",{className:"text-lg",children:["-",l.discountPercent,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x.div,{className:"text-4xl font-bold text-primary",whileHover:{scale:1.05},transition:{duration:.2},children:l&&l.discountPercent>0?b(l.discountedPrice):s&&b(s.price)}),l&&l.discountPercent>0&&e.jsx("div",{className:"text-xl text-maintext line-through font-medium bg-gray-100 px-3 py-2 rounded-lg",children:b(l.originalPrice)})]}),l&&l.discountPercent>0&&e.jsxs("div",{className:"text-sm text-green-600 font-medium space-y-1",children:[e.jsxs("div",{children:["🎉 Áp dụng khuyến mãi: ",(ae=l.appliedPromotion)==null?void 0:ae.name]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-maintext",children:[e.jsxs("span",{children:["Giá gốc: ",e.jsx("span",{className:"line-through",children:b(l.originalPrice)})]}),e.jsx("span",{children:"→"}),e.jsxs("span",{className:"text-green-600 font-semibold",children:["Giá sau giảm: ",b(l.discountedPrice)]})]})]}),(!l||l.discountPercent===0)&&s&&e.jsxs("div",{className:"text-sm text-maintext",children:["Giá bán: ",b(s.price)]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h.Icon,{path:ue,size:1,className:"!text-maintext"}),e.jsx("span",{className:"font-semibold text-maintext",children:"Màu sắc"})]}),(s==null?void 0:s.colorId)&&e.jsx("span",{className:"text-sm !text-maintext bg-gray-100 px-3 py-1 rounded-full",children:s.colorId.name})]}),e.jsx("div",{className:"flex flex-wrap gap-4",children:c.variants.filter((a,r,u)=>r===u.findIndex(j=>j.colorId.id===a.colorId.id)).map(a=>e.jsx(x.button,{onClick:()=>B(a.colorId.id),className:`
                        relative group flex items-center justify-center w-10 h-10 rounded-full
                        transition-all duration-300 border-2
                        ${z===a.colorId.id?"border-primary ring-4 ring-primary/20 scale-110":"border-gray-200 hover:border-gray-300 hover:scale-105"}
                      `,style:{backgroundColor:a.colorId.code},title:a.colorId.name,whileHover:{scale:z===a.colorId.id?1.1:1.05},whileTap:{scale:.95},children:z===a.colorId.id&&e.jsx(h.Icon,{path:pe,size:1,className:"text-white drop-shadow-lg"})},a.colorId.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h.Icon,{path:ge,size:1,className:"!text-maintext"}),e.jsx("span",{className:"font-semibold text-maintext",children:"Kích thước"})]}),(s==null?void 0:s.sizeId)&&e.jsx("span",{className:"text-sm !text-maintext bg-gray-100 px-3 py-1 rounded-full",children:O(s.sizeId.value)})]}),e.jsx("div",{className:"flex flex-wrap gap-4",children:Array.from(new Set(c.variants.map(a=>a.sizeId.id))).map(a=>{var S;const r=c.variants.find(E=>E.sizeId.id===a),u=c.variants.find(E=>E.colorId.id===z&&E.sizeId.id===a),j=!!u&&u.stock>0;return e.jsx(N,{variant:i===a?"default":"outline",size:"icon",onClick:()=>L(a),disabled:!j,className:j?"":"opacity-50 cursor-not-allowed",title:j?"":"Không có sẵn cho màu này",children:O((S=r==null?void 0:r.sizeId)==null?void 0:S.value)},a)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h.Icon,{path:fe,size:1,className:"!text-maintext"}),e.jsx("span",{className:"font-semibold text-maintext",children:"Số lượng"})]}),s&&e.jsxs("span",{className:"text-sm !text-maintext",children:["Còn ",e.jsx("span",{className:"font-semibold text-primary",children:s.stock})," sản phẩm"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"icon",onClick:()=>V(o-1),disabled:o<=1,children:"-"}),e.jsx("div",{className:"w-9 h-9 flex items-center justify-center border text-center text-lg font-semibold bg-gray-50 rounded-sm",children:o}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>V(o+1),disabled:!s||o>=(s.stock||0),children:"+"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsxs(N,{variant:"outline",size:"lg",onClick:()=>A.success("Đã thêm vào danh sách yêu thích"),children:[e.jsx(h.Icon,{path:le,size:1,className:"mr-2"}),"Yêu thích"]}),e.jsxs(N,{size:"lg",onClick:F,disabled:!s||s.stock===0,children:[e.jsx(h.Icon,{path:ce,size:1,className:"mr-2"}),"Thêm vào giỏ hàng"]})]}),e.jsx(H,{className:"p-4 bg-gray-50/50",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(h.Icon,{path:be,size:1,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-maintext",children:"Miễn phí vận chuyển"}),e.jsx("p",{className:"text-sm !text-maintext",children:"Đơn hàng từ 500k"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(h.Icon,{path:je,size:1,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-maintext",children:"Bảo hành chính hãng"}),e.jsx("p",{className:"text-sm !text-maintext",children:"12 tháng"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(h.Icon,{path:ve,size:1,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-maintext",children:"Đổi trả dễ dàng"}),e.jsx("p",{className:"text-sm !text-maintext",children:"Trong 30 ngày"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(h.Icon,{path:ye,size:1,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-maintext",children:"Thanh toán an toàn"}),e.jsx("p",{className:"text-sm !text-maintext",children:"Nhiều phương thức"})]})]})]})}),e.jsxs(H,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-maintext mb-4 flex items-center gap-2",children:[e.jsx(h.Icon,{path:Ne,size:1,className:"text-primary"}),"Thông tin sản phẩm"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Thương hiệu"}),e.jsx("span",{className:"font-medium text-maintext",children:X})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Danh mục"}),e.jsx("span",{className:"font-medium text-maintext",children:Y})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Chất liệu"}),e.jsx("span",{className:"font-medium text-maintext",children:se})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"!text-maintext",children:"Trọng lượng"}),e.jsxs("span",{className:"font-medium text-maintext",children:[c.weight,"g"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Mã sản phẩm"}),e.jsx("span",{className:"font-mono font-medium text-primary",children:c.code})]}),s&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"!text-maintext",children:"Giá hiện tại"}),e.jsx("span",{className:"font-medium text-primary",children:l&&l.discountPercent>0?b(l.discountedPrice):b(s.price)})]})]})]})]})]}),e.jsx(x.div,{className:"mt-20",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsxs(Te,{defaultValue:"description",className:"w-full",children:[e.jsxs($e,{className:"w-full sm:w-auto border-b bg-transparent h-auto p-0 rounded-none",children:[e.jsx(W,{value:"description",className:"flex-1 sm:flex-none data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none pb-4 font-semibold text-maintext",children:"Mô tả sản phẩm"}),e.jsx(W,{value:"specifications",className:"flex-1 sm:flex-none data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none pb-4 font-semibold text-maintext",children:"Thông số kỹ thuật"}),e.jsx(W,{value:"reviews",className:"flex-1 sm:flex-none data-[state=active]:bg-transparent data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none pb-4 font-semibold",children:"Đánh giá (128)"})]}),e.jsx(U,{value:"description",className:"mt-8",children:e.jsx(H,{className:"p-8",children:e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:c.description},className:"text-maintext leading-relaxed"})})})}),e.jsx(U,{value:"specifications",className:"mt-8",children:e.jsx(H,{className:"p-8",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg mb-4 text-maintext",children:"Thông tin cơ bản"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Thương hiệu"}),e.jsx("span",{className:"font-medium",children:X})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Danh mục"}),e.jsx("span",{className:"font-medium",children:Y})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Chất liệu"}),e.jsx("span",{className:"font-medium",children:se})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"!text-maintext",children:"Trọng lượng"}),e.jsxs("span",{className:"font-medium",children:[c.weight,"g"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg mb-4 text-maintext",children:"Thông tin biến thể"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Số màu sắc"}),e.jsxs("span",{className:"font-medium",children:[Array.from(new Set(c.variants.map(a=>a.colorId.id))).length," màu"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"!text-maintext",children:"Số kích thước"}),e.jsxs("span",{className:"font-medium",children:[Array.from(new Set(c.variants.map(a=>a.sizeId.id))).length," size"]})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"!text-maintext",children:"Tổng tồn kho"}),e.jsxs("span",{className:"font-medium",children:[c.variants.reduce((a,r)=>a+r.stock,0)," sản phẩm"]})]})]})]})]})})}),e.jsx(U,{value:"reviews",className:"mt-8",children:e.jsx(H,{className:"p-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(h.Icon,{path:te,size:3,className:"text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-maintext mb-2",children:"Chưa có đánh giá"}),e.jsx("p",{className:"!text-maintext",children:"Hãy là người đầu tiên đánh giá sản phẩm này!"}),e.jsx(N,{className:"mt-4",children:"Viết đánh giá"})]})})})]})}),R.length>0&&e.jsxs(x.div,{className:"mt-20",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-maintext mb-4",children:"Sản phẩm tương tự"}),e.jsx("p",{className:"!text-maintext max-w-2xl mx-auto",children:"Khám phá những sản phẩm tương tự có thể bạn sẽ thích"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:e.jsx(we,{children:R.map((a,r)=>e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:r*.1},children:e.jsx(Oe,{product:a,promotionsData:f})},similarproduct.id))})}),e.jsx("div",{className:"text-center mt-12",children:e.jsx(N,{variant:"outline",size:"lg",asChild:!0,children:e.jsx("a",{href:"/products",children:"Xem tất cả sản phẩm"})})})]})]}),e.jsx("div",{className:"fixed bottom-6 right-6 z-50 shadow-lg rounded-full bg-primary p-2 hover:bg-primary/80 transition-all duration-300",children:e.jsx(Be,{className:"text-white"})})]})}const rs=()=>e.jsx(qe,{});export{rs as default};
