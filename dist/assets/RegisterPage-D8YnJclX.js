import{U as F,j as e,m as z,E,a as y,q as d,B as P,a6 as j}from"./index-Dpx_4rWJ.js";import{u as M,a as T,F as L,b as c,c as h,d as u,e as x,f as g,o as q,s as l}from"./form-BFysSGgk.js";import{C as A,a as R,b as U,d as B,c as H}from"./card-fT6uSY2F.js";import{b as I,E as O,a as V}from"./authentication-DEeDE_cb.js";import{S as Z}from"./scroll-area-jH8Oe1ZO.js";import{L as D}from"./loader-circle-C0q4c54s.js";import"./label-B0XdI4bT.js";import"./createLucideIcon-BdgKQErZ.js";import"./index-BdQq_4o_.js";const W=q({username:l().min(4,"Tên đăng nhập phải có ít nhất 4 ký tự"),fullName:l().min(3,"Tên đầy đủ phải có ít nhất 3 ký tự"),email:l().email("Email không hợp lệ").min(1,"Email không được để trống"),password:l().min(6,"Mật khẩu phải có ít nhất 6 ký tự"),role:l().optional()});function G({onSuccess:b}){const n=I(),{loginUser:w}=E(),[f,v]=y.useState(!1),[p,i]=y.useState(0),[N,s]=y.useState("Nhập mật khẩu là bắt buộc."),o=M({resolver:T(W),defaultValues:{username:"",fullName:"",email:"",password:"",role:"CUSTOMER"}}),k=t=>{if(!t){i(0),s("Nhập mật khẩu là bắt buộc.");return}const a=["password","123456","qwerty","111111","abc123"],m=/abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|qrs|rst|stu|tuv|uvw|vwx|wxy|xyz|012|123|234|345|456|567|678|789|987|876|765|654|543|432|321|210/i;if(a.includes(t.toLowerCase())){if(t.toLowerCase()==="123456"||t.toLowerCase()==="password"){i(10),s("Mật khẩu này nằm trong Top 10 mật khẩu phổ biến nhất.");return}i(20),s("Đây là một mật khẩu rất phổ biến.");return}if(m.test(t)){i(30),s('Chuỗi như "abc" hoặc "6543" rất dễ đoán.');return}let r=0;t.length>=8&&(r+=20),t.length>=12&&(r+=20),/[a-z]/.test(t)&&(r+=10),/[A-Z]/.test(t)&&(r+=10),/[0-9]/.test(t)&&(r+=10),/[^a-zA-Z0-9]/.test(t)&&(r+=20),i(r),r<40?s("Mật khẩu đã chọn có thể mạnh hơn."):r<80?s("Đây là một mật khẩu khá mạnh."):s("Đây là một mật khẩu rất mạnh.")},S=async t=>{var a,m;try{const r=await n.mutateAsync(t);r&&(w((a=r==null?void 0:r.data)==null?void 0:a.account,(m=r==null?void 0:r.data)==null?void 0:m.token),j.success("Đăng ký thành công"),b())}catch(r){console.error("Lỗi đăng ký:",r),j.error("Đăng ký thất bại")}},C=()=>{v(!f)};return e.jsx(L,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(S),className:"flex flex-col gap-4",children:[e.jsx(c,{control:o.control,name:"username",render:({field:t})=>e.jsxs(h,{children:[e.jsx(u,{className:"text-maintext dark:text-gray-300 font-medium",children:"Tên đăng nhập"}),e.jsx(x,{children:e.jsx(d,{type:"text",placeholder:"Nhập tên đăng nhập",...t,className:"border-gray-300 dark:border-gray-700 focus-visible:ring-primary focus-visible:border-primary transition-all duration-300"})}),e.jsx(g,{})]})}),e.jsx(c,{control:o.control,name:"fullName",render:({field:t})=>e.jsxs(h,{children:[e.jsx(u,{className:"text-maintext dark:text-gray-300 font-medium",children:"Họ và tên"}),e.jsx(x,{children:e.jsx(d,{type:"text",placeholder:"Nhập họ và tên của bạn",...t,className:"border-gray-300 dark:border-gray-700 focus-visible:ring-primary focus-visible:border-primary transition-all duration-300"})}),e.jsx(g,{})]})}),e.jsx(c,{control:o.control,name:"email",render:({field:t})=>e.jsxs(h,{children:[e.jsx(u,{className:"text-maintext dark:text-gray-300 font-medium",children:"Email"}),e.jsx(x,{children:e.jsx(d,{type:"email",placeholder:"Nhập email của bạn",...t,className:"border-gray-300 dark:border-gray-700 focus-visible:ring-primary focus-visible:border-primary transition-all duration-300"})}),e.jsx(g,{})]})}),e.jsx(c,{control:o.control,name:"password",render:({field:t})=>e.jsxs(h,{children:[e.jsx(u,{className:"text-maintext dark:text-gray-300 font-medium",children:"Mật khẩu"}),e.jsx(x,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:f?"text":"password",placeholder:"Nhập mật khẩu",...t,onChange:a=>{t.onChange(a),k(a.target.value)},className:"border-gray-300 dark:border-gray-700 focus-visible:ring-primary focus-visible:border-primary transition-all duration-300 pr-10"}),e.jsx("button",{type:"button",onClick:C,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-maintext hover:text-maintext focus:outline-none",children:f?e.jsx(O,{size:16}):e.jsx(V,{size:16})})]})}),e.jsx(g,{}),e.jsxs("div",{className:"mt-2",children:[e.jsx("meter",{min:0,max:100,low:40,high:80,optimum:100,value:p,className:"w-full h-1.5 rounded-full overflow-hidden [&::-webkit-meter-bar]:bg-gray-300 [&::-webkit-meter-optimum-value]:bg-green-500 [&::-webkit-meter-suboptimum-value]:bg-yellow-500 [&::-webkit-meter-even-less-good-value]:bg-red-500 [&::-moz-meter-bar]:bg-gray-300 [&::-moz-meter-optimum]:bg-green-500 [&::-moz-meter-suboptimum]:bg-yellow-500 [&::-moz-meter-border-less-good]:bg-red-500"}),e.jsx("p",{className:"text-xs mt-1",style:{color:p<40?"#ef4444":p<80?"#f59e0b":"#22c55e"},children:N})]})]})}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("a",{href:"/auth/login",className:"text-sm font-semibold text-primary hover:text-secondary transition-colors duration-300",children:"Đã có tài khoản? Đăng nhập"})}),e.jsx("div",{className:"flex justify-center flex-1 h-full items-end mt-4",children:e.jsx(P,{type:"submit",className:"bg-primary hover:bg-secondary transition-all duration-300 text-base font-medium w-full py-4",disabled:n.isPending,children:n.isPending?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-5 h-5 mr-2 animate-spin"}),"Đang đăng ký..."]}):"Đăng ký"})})]})})}function J(){const b=F(),n=()=>{b("/")};return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-hidden bg-gradient-to-br from-green-50 via-green-100 to-green-50 dark:from-gray-900 dark:to-gray-800",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute h-20 w-20 rounded-full bg-primary/70 top-12 left-[10%]"}),e.jsx("div",{className:"absolute h-24 w-24 rounded-full bg-secondary/80 top-36 right-[15%]"}),e.jsx("div",{className:"absolute h-16 w-16 rounded-full bg-primary/40 bottom-10 left-[20%]"}),e.jsx("div",{className:"absolute h-32 w-32 rounded-full bg-secondary/70 -bottom-10 right-[25%]"}),e.jsx("div",{className:"absolute h-28 w-28 rounded-full bg-primary/70 -top-10 left-[40%]"}),e.jsx("div",{className:"absolute h-12 w-12 rounded-full bg-secondary/40 top-1/2 left-[5%]"}),e.jsx("div",{className:"absolute h-14 w-14 rounded-full bg-primary/80 bottom-1/3 right-[10%]"}),e.jsx("div",{className:"absolute h-10 w-10 rounded-full bg-secondary/70 top-1/4 right-[30%]"}),e.jsx("div",{className:"absolute h-36 w-36 rounded-full bg-gradient-to-r from-primary/20 to-secondary/20 -bottom-16 left-[30%] blur-sm"}),e.jsx("div",{className:"absolute h-40 w-40 rounded-full bg-gradient-to-r from-secondary/20 to-primary/20 -top-20 right-[20%] blur-sm"})]}),e.jsx("div",{className:"flex justify-center items-center relative z-10",children:e.jsx(z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"w-[600px]",children:e.jsxs(A,{className:"flex flex-col w-full shadow-lg bg-white dark:bg-gray-800/40 backdrop-blur-md border border-white/20 dark:border-gray-700/30 backdrop-filter",children:[e.jsxs(R,{className:"pb-3",children:[e.jsx(U,{className:"text-2xl font-bold text-maintext dark:text-white",children:e.jsxs("span",{className:"relative",children:["Tạo tài khoản mới",e.jsx("span",{className:"absolute -bottom-1 left-0 w-12 h-1 bg-gradient-to-r from-primary to-secondary rounded-full"})]})}),e.jsx(B,{className:"text-maintext dark:text-maintext pt-3",children:"Đăng ký để khám phá Clothes Shop!"})]}),e.jsx(H,{className:"pt-6",children:e.jsx(Z,{className:"h-[60vh] pr-4",children:e.jsx("div",{className:"pb-4",children:e.jsx(G,{onSuccess:n})})})})]})})})]})}const se=()=>e.jsx(J,{});export{se as default};
