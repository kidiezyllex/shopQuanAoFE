import{j as e}from"./ui-vendor-CFM_MCUz.js";import{u as t,r}from"./react-vendor-B55MjJUH.js";import{u as s,a,F as o,b as l,c as i,d as n,e as m,f as d}from"./form-DeJYl1uA.js";import{u as c,I as u,B as h,y as x}from"./index-BHeY-5EX.js";import{C as b,a as p,b as f,d as g,c as j}from"./card-ClEzRAeX.js";import{a as y}from"./authentication-DJyUXwd2.js";import{S as v}from"./scroll-area-CfH0A0Iz.js";import{m as N}from"./heavy-vendor-BfN2pHnQ.js";import{aa as k,ab as w,ac as z}from"./icons-vendor-BrsZP2ku.js";import{o as C,s as S}from"./utils-vendor-C6znz4jh.js";import"./label-Bm9nFuXD.js";import"./query-vendor-CBwfxcof.js";const T=C({username:S().min(4,"Tên đăng nhập phải có ít nhất 4 ký tự"),fullName:S().min(3,"Tên đầy đủ phải có ít nhất 3 ký tự"),email:S().email("Email không hợp lệ").min(1,"Email không được để trống"),password:S().min(6,"Mật khẩu phải có ít nhất 6 ký tự"),role:S().optional()});function q({onSuccess:t}){const b=y(),{loginUser:p}=c(),[f,g]=r.useState(!1),[j,v]=r.useState(0),[N,C]=r.useState("Nhập mật khẩu là bắt buộc."),S=s({resolver:a(T),defaultValues:{username:"",fullName:"",email:"",password:"",role:"CUSTOMER"}}),q=()=>{g(!f)};return e.jsx(o,{...S,children:e.jsxs("form",{onSubmit:S.handleSubmit((async e=>{var r,s;try{const a=await b.mutateAsync(e);a&&(p(null==(r=null==a?void 0:a.data)?void 0:r.account,null==(s=null==a?void 0:a.data)?void 0:s.token),x.success("Đăng ký thành công"),t())}catch(a){x.error("Đăng ký thất bại")}})),className:"flex flex-col gap-4",children:[e.jsx(l,{control:S.control,name:"username",render:({field:t})=>e.jsxs(i,{children:[e.jsx(n,{className:"text-maintext dark:text-gray-300 font-medium",children:"Tên đăng nhập"}),e.jsx(m,{children:e.jsx(u,{type:"text",placeholder:"Nhập tên đăng nhập",...t,className:"border-gray-300 dark:border-gray-700 focus-visible:ring-primary focus-visible:border-primary transition-all duration-300"})}),e.jsx(d,{})]})}),e.jsx(l,{control:S.control,name:"fullName",render:({field:t})=>e.jsxs(i,{children:[e.jsx(n,{className:"text-maintext dark:text-gray-300 font-medium",children:"Họ và tên"}),e.jsx(m,{children:e.jsx(u,{type:"text",placeholder:"Nhập họ và tên của bạn",...t,className:"border-gray-300 dark:border-gray-700 focus-visible:ring-primary focus-visible:border-primary transition-all duration-300"})}),e.jsx(d,{})]})}),e.jsx(l,{control:S.control,name:"email",render:({field:t})=>e.jsxs(i,{children:[e.jsx(n,{className:"text-maintext dark:text-gray-300 font-medium",children:"Email"}),e.jsx(m,{children:e.jsx(u,{type:"email",placeholder:"Nhập email của bạn",...t,className:"border-gray-300 dark:border-gray-700 focus-visible:ring-primary focus-visible:border-primary transition-all duration-300"})}),e.jsx(d,{})]})}),e.jsx(l,{control:S.control,name:"password",render:({field:t})=>e.jsxs(i,{children:[e.jsx(n,{className:"text-maintext dark:text-gray-300 font-medium",children:"Mật khẩu"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(u,{type:f?"text":"password",placeholder:"Nhập mật khẩu",...t,onChange:e=>{t.onChange(e),(e=>{if(!e)return v(0),void C("Nhập mật khẩu là bắt buộc.");if(["password","123456","qwerty","111111","abc123"].includes(e.toLowerCase()))return"123456"===e.toLowerCase()||"password"===e.toLowerCase()?(v(10),void C("Mật khẩu này nằm trong Top 10 mật khẩu phổ biến nhất.")):(v(20),void C("Đây là một mật khẩu rất phổ biến."));if(/abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|qrs|rst|stu|tuv|uvw|vwx|wxy|xyz|012|123|234|345|456|567|678|789|987|876|765|654|543|432|321|210/i.test(e))return v(30),void C('Chuỗi như "abc" hoặc "6543" rất dễ đoán.');let t=0;e.length>=8&&(t+=20),e.length>=12&&(t+=20),/[a-z]/.test(e)&&(t+=10),/[A-Z]/.test(e)&&(t+=10),/[0-9]/.test(e)&&(t+=10),/[^a-zA-Z0-9]/.test(e)&&(t+=20),v(t),C(t<40?"Mật khẩu đã chọn có thể mạnh hơn.":t<80?"Đây là một mật khẩu khá mạnh.":"Đây là một mật khẩu rất mạnh.")})(e.target.value)},className:"border-gray-300 dark:border-gray-700 focus-visible:ring-primary focus-visible:border-primary transition-all duration-300 pr-10"}),e.jsx("button",{type:"button",onClick:q,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-maintext hover:text-maintext focus:outline-none",children:f?e.jsx(k,{size:16}):e.jsx(w,{size:16})})]})}),e.jsx(d,{}),e.jsxs("div",{className:"mt-2",children:[e.jsx("meter",{min:0,max:100,low:40,high:80,optimum:100,value:j,className:"w-full h-1.5 rounded-full overflow-hidden [&::-webkit-meter-bar]:bg-gray-300 [&::-webkit-meter-optimum-value]:bg-green-500 [&::-webkit-meter-suboptimum-value]:bg-yellow-500 [&::-webkit-meter-even-less-good-value]:bg-red-500 [&::-moz-meter-bar]:bg-gray-300 [&::-moz-meter-optimum]:bg-green-500 [&::-moz-meter-suboptimum]:bg-yellow-500 [&::-moz-meter-border-less-good]:bg-red-500"}),e.jsx("p",{className:"text-xs mt-1",style:{color:j<40?"#ef4444":j<80?"#f59e0b":"#22c55e"},children:N})]})]})}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("a",{href:"/auth/login",className:"text-sm font-semibold text-primary hover:text-secondary transition-colors duration-300",children:"Đã có tài khoản? Đăng nhập"})}),e.jsx("div",{className:"flex justify-center flex-1 h-full items-end mt-4",children:e.jsx(h,{type:"submit",className:"bg-primary hover:bg-secondary transition-all duration-300 text-base font-medium w-full py-4",disabled:b.isPending,children:b.isPending?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-5 h-5 mr-2 animate-spin"}),"Đang đăng ký..."]}):"Đăng ký"})})]})})}function M(){const r=t();return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-hidden bg-gradient-to-br from-green-50 via-green-100 to-green-50 dark:from-gray-900 dark:to-gray-800",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute h-20 w-20 rounded-full bg-primary/70 top-12 left-[10%]"}),e.jsx("div",{className:"absolute h-24 w-24 rounded-full bg-secondary/80 top-36 right-[15%]"}),e.jsx("div",{className:"absolute h-16 w-16 rounded-full bg-primary/40 bottom-10 left-[20%]"}),e.jsx("div",{className:"absolute h-32 w-32 rounded-full bg-secondary/70 -bottom-10 right-[25%]"}),e.jsx("div",{className:"absolute h-28 w-28 rounded-full bg-primary/70 -top-10 left-[40%]"}),e.jsx("div",{className:"absolute h-12 w-12 rounded-full bg-secondary/40 top-1/2 left-[5%]"}),e.jsx("div",{className:"absolute h-14 w-14 rounded-full bg-primary/80 bottom-1/3 right-[10%]"}),e.jsx("div",{className:"absolute h-10 w-10 rounded-full bg-secondary/70 top-1/4 right-[30%]"}),e.jsx("div",{className:"absolute h-36 w-36 rounded-full bg-gradient-to-r from-primary/20 to-secondary/20 -bottom-16 left-[30%] blur-sm"}),e.jsx("div",{className:"absolute h-40 w-40 rounded-full bg-gradient-to-r from-secondary/20 to-primary/20 -top-20 right-[20%] blur-sm"})]}),e.jsx("div",{className:"flex justify-center items-center relative z-10",children:e.jsx(N.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"w-[600px]",children:e.jsxs(b,{className:"flex flex-col w-full shadow-lg bg-white dark:bg-gray-800/40 backdrop-blur-md border border-white/20 dark:border-gray-700/30 backdrop-filter",children:[e.jsxs(p,{className:"pb-3",children:[e.jsx(f,{className:"text-2xl font-bold text-maintext dark:text-white",children:e.jsxs("span",{className:"relative",children:["Tạo tài khoản mới",e.jsx("span",{className:"absolute -bottom-1 left-0 w-12 h-1 bg-gradient-to-r from-primary to-secondary rounded-full"})]})}),e.jsx(g,{className:"text-maintext dark:text-maintext pt-3",children:"Đăng ký để khám phá Clothes Shop!"})]}),e.jsx(j,{className:"pt-6",children:e.jsx(v,{className:"h-[60vh] pr-4",children:e.jsx("div",{className:"pb-4",children:e.jsx(q,{onSuccess:()=>{r("/")}})})})})]})})})]})}const E=()=>e.jsx(M,{});export{E as default};
