import{j as e}from"./ui-vendor-CFM_MCUz.js";import{r as t}from"./react-vendor-B55MjJUH.js";import{C as a,c as s,a as l,b as n}from"./card-ClEzRAeX.js";import{S as i}from"./skeleton-4G_X8bY4.js";import{t as r,b0 as d,aC as c,a3 as h,b1 as o,w as x,b2 as m,J as u}from"./icons-vendor-BrsZP2ku.js";import{s as j,G as g,t as v,B as p,I as N,y}from"./index-BHeY-5EX.js";import{u as b,c as f,d as D}from"./query-vendor-CBwfxcof.js";import{B as w,a as S,b as T,c as L,d as C,e as k}from"./breadcrumb-CP4jYkI2.js";import{D as F,f as O,a as Y,b as R,c as I,e as K}from"./dialog-Va24CY58.js";import{T as P,a as $,b as q,c as E,d as M,e as A}from"./table-DL-K3PV4.js";import{S as H,a as V,b as z,c as Q,d as B}from"./select-C6W71KWg.js";import{B as W}from"./badge-BeHegjHt.js";import{T as _,b as G,c as J,a as U}from"./tabs-z4DSy6tE.js";import{L as X}from"./label-Bm9nFuXD.js";import{R as Z,L as ee,C as te,X as ae,Y as se,T as le,b as ne,d as ie,P as re,e as de,f as ce,B as he,g as oe}from"./heavy-vendor-BfN2pHnQ.js";const xe=(e={})=>b({queryKey:["statistics",e],queryFn:()=>(async(e={})=>await g("/statistics",e))(e)}),me=e=>b({queryKey:["statistics",e],queryFn:()=>(async e=>await g(`/statistics/${e}`))(e),enabled:!!e}),ue=e=>b({queryKey:["revenueReport",e],queryFn:()=>(async e=>await g("/statistics/revenue",e))(e),enabled:!!e.startDate&&!!e.endDate}),je=e=>b({queryKey:["topProducts",e],queryFn:()=>(async e=>await g("/statistics/top-products",e))(e),enabled:!!e.startDate&&!!e.endDate}),ge=()=>f({mutationFn:e=>(async e=>await j("/statistics/generate-daily",e))(e)});function ve(){var j,g,b,f,ve,pe,Ne,ye,be,fe,De,we,Se,Te,Le,Ce,ke,Fe,Oe,Ye,Re,Ie,Ke,Pe,$e,qe,Ee,Me;const[Ae,He]=t.useState({type:"MONTHLY",page:1,limit:10}),[Ve,ze]=t.useState({type:"MONTHLY",startDate:new Date((new Date).getFullYear(),(new Date).getMonth()-5,1).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0]}),[Qe,Be]=t.useState({startDate:new Date((new Date).getFullYear(),(new Date).getMonth()-2,1).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],limit:10}),[We,_e]=t.useState(!1),[Ge,Je]=t.useState((new Date).toISOString().split("T")[0]),[Ue,Xe]=t.useState("overview"),[Ze,et]=t.useState(null),[tt,at]=t.useState(!1),st=D(),lt={type:"MONTHLY",startDate:new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],limit:1},{data:nt,isLoading:it,isError:rt}=xe(Ae),{data:dt,isLoading:ct,isError:ht}=xe(lt),{data:ot,isLoading:xt,isError:mt}=ue(Ve),{data:ut,isLoading:jt,isError:gt}=je(Qe),vt=ge(),{data:pt}=v({role:"CUSTOMER"}),{data:Nt,isLoading:yt}=me(Ze||""),bt=(e,t)=>{ze({...Ve,[e]:t})},ft=(e,t)=>{Be({...Qe,[e]:t})},Dt=e=>{He({...Ae,page:e})},wt=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(e),St=({title:t,value:l,icon:n,iconColor:i,bgColor:d,change:c})=>e.jsx(a,{className:"h-full",children:e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base text-maintext",children:t}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-maintext",children:l}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(r.Icon,{path:x,size:.7,className:c>=0?"text-primary":"text-red-600"}),e.jsxs("span",{className:"text-sm ml-1 "+(c>=0?"text-primary":"text-red-600"),children:[Math.abs(c).toFixed(1),"% ",c>=0?"tăng":"giảm"]})]})]}),e.jsx("div",{className:`${d} w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0`,children:e.jsx(r.Icon,{path:n,size:1,className:i})})]})})});!(null==(g=null==(j=null==nt?void 0:nt.data)?void 0:j.statistics)?void 0:g.length)||nt.data.statistics.reduce(((e,t)=>(e.totalOrders+=t.totalOrders,e.totalRevenue+=t.totalRevenue,e.totalProfit+=t.totalProfit,e)),{totalOrders:0,totalRevenue:0,totalProfit:0}),null==(f=null==(b=null==nt?void 0:nt.data)?void 0:b.statistics)||f[0];const Tt=(null==(pe=null==(ve=null==dt?void 0:dt.data)?void 0:ve.statistics)?void 0:pe[0])||{totalOrders:0,totalProfit:0},Lt=(null==(Ne=null==ot?void 0:ot.data)?void 0:Ne.reduce(((e,t)=>e+t.totalRevenue),0))||0,Ct=(null==(be=null==(ye=null==pt?void 0:pt.data)?void 0:ye.accounts)?void 0:be.filter((e=>{const t=new Date(e.createdAt),a=new Date,s=a.getMonth(),l=a.getFullYear();return t.getMonth()===s&&t.getFullYear()===l})).length)||0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(w,{children:e.jsxs(S,{children:[e.jsx(T,{children:e.jsx(L,{href:"/admin/statistics",children:"Dashboard"})}),e.jsx(C,{}),e.jsx(T,{children:e.jsx(k,{children:"Thống kê"})})]})}),e.jsxs(F,{open:We,onOpenChange:_e,children:[e.jsx(O,{asChild:!0,children:e.jsxs(p,{variant:"outline",children:[e.jsx(r.Icon,{path:d,size:.7,className:"mr-2"}),"Tạo thống kê"]})}),e.jsxs(Y,{children:[e.jsx(R,{children:e.jsx(I,{children:"Tạo thống kê thủ công"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"generateDate",children:"Chọn ngày cần tạo thống kê"}),e.jsx(N,{id:"generateDate",type:"date",value:Ge,onChange:e=>Je(e.target.value)})]}),e.jsx("p",{className:"text-sm text-maintext",children:"Lưu ý: Chức năng này thường được hệ thống tự động thực hiện. Chỉ sử dụng khi cần thiết."})]}),e.jsxs(K,{children:[e.jsx(p,{variant:"outline",onClick:()=>_e(!1),children:"Hủy"}),e.jsx(p,{onClick:async()=>{try{await vt.mutateAsync({date:Ge},{onSuccess:()=>{y.success("Đã tạo thống kê thành công"),st.invalidateQueries({queryKey:["statistics"]}),st.invalidateQueries({queryKey:["revenueReport"]}),st.invalidateQueries({queryKey:["topProducts"]}),_e(!1)}})}catch(e){y.error("Tạo thống kê thất bại")}},disabled:vt.isPending,children:vt.isPending?e.jsxs(e.Fragment,{children:[e.jsx(r.Icon,{path:c,size:.7,className:"mr-2 animate-spin"}),"Đang xử lý..."]}):"Tạo thống kê"})]})]})]})]}),e.jsxs(_,{defaultValue:"overview",value:Ue,onValueChange:Xe,className:"space-y-4",children:[e.jsxs(G,{className:"grid grid-cols-3 w-full max-w-6xl",children:[e.jsx(J,{value:"overview",children:"Tổng quan"}),e.jsx(J,{value:"revenue",children:"Doanh thu"}),e.jsx(J,{value:"products",children:"Sản phẩm"})]}),e.jsxs(U,{value:"overview",className:"space-y-4",children:[it||xt||ct?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[...Array(4)].map(((t,l)=>e.jsx(a,{className:"h-full",children:e.jsxs(s,{className:"p-4",children:[e.jsx(i,{className:"h-5 w-32 mb-2"}),e.jsx(i,{className:"h-8 w-24 mb-2"}),e.jsx(i,{className:"h-5 w-40"})]})},l)))}):rt||mt||ht?e.jsx(a,{className:"p-4",children:e.jsx("p",{className:"text-red-600",children:"Lỗi khi tải dữ liệu thống kê"})}):(null==(De=null==(fe=null==dt?void 0:dt.data)?void 0:fe.statistics)?void 0:De.length)?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsx(St,{title:"Tổng doanh thu",value:wt(Lt),icon:h,iconColor:"text-primary",bgColor:"bg-green-100",change:0}),e.jsx(St,{title:"Số đơn hàng",value:(null==(we=null==Tt?void 0:Tt.totalOrders)?void 0:we.toString())||"0",icon:o,iconColor:"text-blue-600",bgColor:"bg-blue-100",change:5.3}),e.jsx(St,{title:"Lợi nhuận",value:wt((null==Tt?void 0:Tt.totalProfit)||0),icon:x,iconColor:"text-purple-600",bgColor:"bg-purple-100",change:7.8}),e.jsx(St,{title:"Khách hàng mới",value:Ct.toString(),icon:m,iconColor:"text-amber-600",bgColor:"bg-amber-100",change:3.2})]}):e.jsx("div",{className:"flex items-center justify-center h-80 text-maintext",children:e.jsx("p",{children:"Không có dữ liệu thống kê"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs(a,{className:"lg:col-span-2",children:[e.jsx(l,{children:e.jsx(n,{children:"Doanh thu theo thời gian"})}),e.jsx(s,{className:"p-4",children:xt?e.jsx(i,{className:"h-64 w-full"}):mt?e.jsx("p",{className:"text-red-600",children:"Lỗi khi tải dữ liệu biểu đồ doanh thu"}):(null==(Se=null==ot?void 0:ot.data)?void 0:Se.length)?e.jsx("div",{className:"w-full h-64",children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(ee,{data:((null==ot?void 0:ot.data)||[]).map((e=>({date:e.date,revenue:e.totalRevenue}))),margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(te,{strokeDasharray:"3 3"}),e.jsx(ae,{dataKey:"date"}),e.jsx(se,{}),e.jsx(le,{formatter:e=>wt(e)}),e.jsx(ne,{}),e.jsx(ie,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",activeDot:{r:8}})]})})}):e.jsx("div",{className:"flex items-center justify-center h-64 text-maintext",children:e.jsx("p",{children:"Không có dữ liệu doanh thu"})})})]}),e.jsxs(a,{children:[e.jsx(l,{children:e.jsx(n,{children:"Top 5 sản phẩm bán chạy"})}),e.jsx(s,{className:"p-4 max-h-96 overflow-y-auto",children:jt?e.jsx(i,{className:"h-64 w-full"}):gt?e.jsx("p",{className:"text-red-600",children:"Lỗi khi tải dữ liệu sản phẩm bán chạy"}):(null==(Te=null==ut?void 0:ut.data)?void 0:Te.length)?e.jsx("div",{className:"w-full h-64",children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(re,{children:[e.jsx(de,{data:null==(Le=null==ut?void 0:ut.data)?void 0:Le.slice(0,Qe.limit||10).map(((e,t)=>{var a,s;return{name:(null==(a=e.product)?void 0:a.name)?e.product.name.length>20?`${e.product.name.substring(0,20)}...`:e.product.name:`Sản phẩm ${t+1}`,fullName:(null==(s=e.product)?void 0:s.name)||`Sản phẩm ${t+1}`,quantity:e.totalQuantity,revenue:e.totalRevenue}})),cx:"50%",cy:"50%",outerRadius:100,innerRadius:40,dataKey:"quantity",label:({name:e,percent:t})=>t>.05?`${e}: ${(100*t).toFixed(1)}%`:"",labelLine:!1,children:null==(Ce=null==ut?void 0:ut.data)?void 0:Ce.slice(0,Qe.limit||10).map(((t,a)=>e.jsx(ce,{},`cell-${a}`)))}),e.jsx(le,{formatter:(e,t,a)=>[`${e} sản phẩm`,a.payload.fullName||t],labelFormatter:()=>"Sản phẩm bán chạy"}),e.jsx(ne,{verticalAlign:"bottom",height:36,formatter:(e,t)=>{var a,s,l;return(null==(s=null==(a=t.payload)?void 0:a.fullName)?void 0:s.length)>25?`${t.payload.fullName.substring(0,25)}...`:(null==(l=t.payload)?void 0:l.fullName)||e}})]})})}):e.jsx("div",{className:"flex items-center justify-center h-64 text-maintext",children:e.jsx("p",{children:"Không có dữ liệu sản phẩm bán chạy"})})})]})]})]}),e.jsx(U,{value:"revenue",className:"space-y-4",children:e.jsxs(a,{className:"mb-4",children:[e.jsx(l,{children:e.jsx(n,{children:"Báo cáo doanh thu"})}),e.jsxs(s,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(X,{htmlFor:"revType",children:"Loại thống kê"}),e.jsxs(H,{value:Ve.type||"MONTHLY",onValueChange:e=>bt("type",e),children:[e.jsx(V,{id:"revType",children:e.jsx(z,{placeholder:"Chọn loại thống kê"})}),e.jsxs(Q,{children:[e.jsx(B,{value:"DAILY",children:"Theo ngày"}),e.jsx(B,{value:"WEEKLY",children:"Theo tuần"}),e.jsx(B,{value:"MONTHLY",children:"Theo tháng"}),e.jsx(B,{value:"YEARLY",children:"Theo năm"})]})]})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"startDate",children:"Từ ngày"}),e.jsx(N,{id:"startDate",type:"date",value:Ve.startDate,onChange:e=>bt("startDate",e.target.value)})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"endDate",children:"Đến ngày"}),e.jsx(N,{id:"endDate",type:"date",value:Ve.endDate,onChange:e=>bt("endDate",e.target.value)})]})]}),xt?e.jsx(i,{className:"h-80 w-full"}):mt?e.jsx("p",{className:"text-red-600",children:"Lỗi khi tải dữ liệu báo cáo doanh thu"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-slate-50 rounded-[6px] mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-maintext",children:"Tổng doanh thu"}),e.jsx("p",{className:"text-2xl font-bold text-green-500 mt-2",children:wt(Lt)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-maintext",children:"Số đơn hàng"}),e.jsx("p",{className:"text-2xl font-bold mt-2 text-blue-500",children:(null==(ke=null==ot?void 0:ot.data)?void 0:ke.reduce(((e,t)=>e+t.totalOrders),0))||0})]})]})}),e.jsx("div",{className:"w-full h-80",children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(he,{data:((null==ot?void 0:ot.data)||[]).map((e=>({date:e.date,revenue:e.totalRevenue}))),margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(te,{strokeDasharray:"3 3"}),e.jsx(ae,{dataKey:"date"}),e.jsx(se,{}),e.jsx(le,{formatter:e=>wt(e)}),e.jsx(ne,{}),e.jsx(oe,{dataKey:"revenue",name:"Doanh thu"})]})})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Chi tiết doanh thu"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(P,{children:[e.jsx($,{children:e.jsxs(q,{children:[e.jsx(E,{children:"Thời gian"}),e.jsx(E,{className:"text-right",children:"Doanh thu"})]})}),e.jsx(M,{children:((null==ot?void 0:ot.data)||[]).map(((t,a)=>e.jsxs(q,{children:[e.jsx(A,{children:t.date}),e.jsx(A,{className:"text-right",children:wt(t.totalRevenue)})]},a)))})]})})]})]})]})]})}),e.jsx(U,{value:"products",className:"space-y-4 text-maintext",children:e.jsxs(a,{className:"mb-4",children:[e.jsx(l,{children:e.jsx(n,{children:"Sản phẩm bán chạy"})}),e.jsxs(s,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(X,{htmlFor:"prodStartDate",children:"Từ ngày"}),e.jsx(N,{id:"prodStartDate",type:"date",value:Qe.startDate,onChange:e=>ft("startDate",e.target.value)})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"prodEndDate",children:"Đến ngày"}),e.jsx(N,{id:"prodEndDate",type:"date",value:Qe.endDate,onChange:e=>ft("endDate",e.target.value)})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"prodLimit",children:"Số lượng hiển thị"}),e.jsxs(H,{value:(null==(Fe=Qe.limit)?void 0:Fe.toString())||"10",onValueChange:e=>ft("limit",parseInt(e)),children:[e.jsx(V,{id:"prodLimit",children:e.jsx(z,{placeholder:"Số lượng hiển thị"})}),e.jsxs(Q,{children:[e.jsx(B,{value:"5",children:"5 sản phẩm"}),e.jsx(B,{value:"10",children:"10 sản phẩm"}),e.jsx(B,{value:"20",children:"20 sản phẩm"}),e.jsx(B,{value:"50",children:"50 sản phẩm"})]})]})]})]}),jt?e.jsx(i,{className:"h-80 w-full"}):gt?e.jsx("p",{className:"text-red-600",children:"Lỗi khi tải dữ liệu sản phẩm bán chạy"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full h-80 mb-4",children:e.jsx(Z,{width:"100%",height:"100%",children:e.jsxs(re,{children:[e.jsx(de,{data:null==(Oe=null==ut?void 0:ut.data)?void 0:Oe.slice(0,Qe.limit||10).map(((e,t)=>{var a,s;return{name:(null==(a=e.product)?void 0:a.name)?e.product.name.length>20?`${e.product.name.substring(0,20)}...`:e.product.name:`Sản phẩm ${t+1}`,fullName:(null==(s=e.product)?void 0:s.name)||`Sản phẩm ${t+1}`,quantity:e.totalQuantity,revenue:e.totalRevenue}})),cx:"50%",cy:"50%",outerRadius:100,innerRadius:40,dataKey:"quantity",label:({name:e,percent:t})=>t>.05?`${e}: ${(100*t).toFixed(1)}%`:"",labelLine:!1,children:null==(Ye=null==ut?void 0:ut.data)?void 0:Ye.slice(0,Qe.limit||10).map(((t,a)=>e.jsx(ce,{},`cell-${a}`)))}),e.jsx(le,{formatter:(e,t,a)=>[`${e} sản phẩm`,a.payload.fullName||t],labelFormatter:()=>"Sản phẩm bán chạy"}),e.jsx(ne,{verticalAlign:"bottom",height:36,formatter:(e,t)=>{var a,s,l;return(null==(s=null==(a=t.payload)?void 0:a.fullName)?void 0:s.length)>25?`${t.payload.fullName.substring(0,25)}...`:(null==(l=t.payload)?void 0:l.fullName)||e}})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-700 mb-2",children:"Tổng số lượng bán"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[(null==(Re=null==ut?void 0:ut.data)?void 0:Re.reduce(((e,t)=>e+t.totalQuantity),0))||0," sản phẩm"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-green-700 mb-2",children:"Tổng doanh thu"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:wt((null==(Ie=null==ut?void 0:ut.data)?void 0:Ie.reduce(((e,t)=>e+t.totalRevenue),0))||0)})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(P,{children:[e.jsx($,{children:e.jsxs(q,{children:[e.jsx(E,{children:"Tên sản phẩm"}),e.jsx(E,{children:"Thương hiệu"}),e.jsx(E,{className:"text-right",children:"Số lượng bán"}),e.jsx(E,{className:"text-right",children:"Doanh thu"})]})}),e.jsx(M,{children:null==(Ke=null==ut?void 0:ut.data)?void 0:Ke.map(((t,a)=>{var s,l,n;return e.jsxs(q,{children:[e.jsx(A,{className:"font-medium text-maintext",children:(null==(s=t.product)?void 0:s.name)||`Sản phẩm ${a+1}`}),e.jsx(A,{className:"text-maintext",children:(null==(n=null==(l=t.product)?void 0:l.brand)?void 0:n.name)||"ADIDAS"}),e.jsx(A,{className:"text-right text-maintext",children:t.totalQuantity}),e.jsx(A,{className:"text-right text-maintext",children:wt(t.totalRevenue)})]},a)}))})]})})]})]})]})}),e.jsx(U,{value:"statistics",className:"space-y-4 text-maintext",children:e.jsxs(a,{className:"mb-4",children:[e.jsx(l,{children:e.jsx(n,{children:"Lịch sử thống kê"})}),e.jsxs(s,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(X,{htmlFor:"statsType",children:"Loại thống kê"}),e.jsxs(H,{value:Ae.type||"",onValueChange:e=>He({...Ae,type:e}),children:[e.jsx(V,{id:"statsType",children:e.jsx(z,{placeholder:"Chọn loại thống kê"})}),e.jsxs(Q,{children:[e.jsx(B,{value:"",children:"Tất cả"}),e.jsx(B,{value:"DAILY",children:"Theo ngày"}),e.jsx(B,{value:"WEEKLY",children:"Theo tuần"}),e.jsx(B,{value:"MONTHLY",children:"Theo tháng"}),e.jsx(B,{value:"YEARLY",children:"Theo năm"})]})]})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"statsStartDate",children:"Từ ngày"}),e.jsx(N,{id:"statsStartDate",type:"date",value:Ae.startDate||"",onChange:e=>He({...Ae,startDate:e.target.value})})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"statsEndDate",children:"Đến ngày"}),e.jsx(N,{id:"statsEndDate",type:"date",value:Ae.endDate||"",onChange:e=>He({...Ae,endDate:e.target.value})})]}),e.jsxs("div",{children:[e.jsx(X,{htmlFor:"statsLimit",children:"Số lượng mỗi trang"}),e.jsxs(H,{value:(null==(Pe=Ae.limit)?void 0:Pe.toString())||"10",onValueChange:e=>He({...Ae,limit:parseInt(e),page:1}),children:[e.jsx(V,{id:"statsLimit",children:e.jsx(z,{placeholder:"Số lượng mỗi trang"})}),e.jsxs(Q,{children:[e.jsx(B,{value:"10",children:"10 mục"}),e.jsx(B,{value:"20",children:"20 mục"}),e.jsx(B,{value:"50",children:"50 mục"}),e.jsx(B,{value:"100",children:"100 mục"})]})]})]})]}),it?e.jsx(i,{className:"h-80 w-full"}):rt?e.jsx("p",{className:"text-red-600",children:"Lỗi khi tải dữ liệu thống kê"}):(null==(qe=null==($e=null==nt?void 0:nt.data)?void 0:$e.statistics)?void 0:qe.length)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(P,{children:[e.jsx($,{children:e.jsxs(q,{children:[e.jsx(E,{children:"Ngày thống kê"}),e.jsx(E,{children:"Loại"}),e.jsx(E,{className:"text-right",children:"Số đơn hàng"}),e.jsx(E,{className:"text-right",children:"Doanh thu"}),e.jsx(E,{className:"text-right",children:"Lợi nhuận"}),e.jsx(E,{className:"text-center",children:"Hành động"})]})}),e.jsx(M,{children:null==(Me=null==(Ee=null==nt?void 0:nt.data)?void 0:Ee.statistics)?void 0:Me.map((t=>{return e.jsxs(q,{children:[e.jsx(A,{className:"font-medium text-maintext",children:(a=t.date,new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(a)))}),e.jsx(A,{className:"text-maintext",children:e.jsx(W,{variant:"outline",children:"DAILY"===t.type?"Ngày":"WEEKLY"===t.type?"Tuần":"MONTHLY"===t.type?"Tháng":"Năm"})}),e.jsx(A,{className:"text-right text-maintext",children:t.totalOrders}),e.jsx(A,{className:"text-right text-maintext",children:wt(t.totalRevenue)}),e.jsx(A,{className:"text-right text-maintext",children:wt(t.totalProfit)}),e.jsx(A,{className:"text-center",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{return e=t.id,et(e),void at(!0);var e},children:[e.jsx(r.Icon,{path:u,size:.6,className:"mr-1"}),"Chi tiết"]})})]},t.id);var a}))})]})}),nt&&nt.data.pagination.totalPages>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>Dt(nt.data.pagination.currentPage-1),disabled:nt.data.pagination.currentPage<=1,children:"Trước"}),e.jsxs("span",{className:"text-sm text-maintext",children:["Trang ",nt.data.pagination.currentPage," / ",nt.data.pagination.totalPages]}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>Dt(nt.data.pagination.currentPage+1),disabled:nt.data.pagination.currentPage>=nt.data.pagination.totalPages,children:"Sau"})]})]}):e.jsx("div",{className:"flex items-center justify-center h-80 text-maintext",children:e.jsx("p",{children:"Không có dữ liệu thống kê"})})]})]})})]})]})}export{ve as S};
