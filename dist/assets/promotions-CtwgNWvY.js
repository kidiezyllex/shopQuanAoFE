const e=(e,t,n)=>{if(!n||0===n.length)return{originalPrice:t,discountedPrice:t,discountPercent:0};const i=new Date,r=n.filter((t=>{if("HOAT_DONG"!==t.status)return!1;const n=new Date(t.startDate),r=new Date(t.endDate),c=new Date(n.getTime()-252e5),o=new Date(r.getTime()-252e5);if(i<c||i>o)return!1;if(!t.products||0===t.products.length)return!0;return t.products.some((t=>{let n;if("string"==typeof t)n=t;else{if(!t||"object"!=typeof t)return!1;n=t.id||t.id}return n===e}))}));if(0===r.length)return{originalPrice:t,discountedPrice:t,discountPercent:0};const c=r.reduce(((e,t)=>t.discountPercent>e.discountPercent?t:e)),o=t-t*c.discountPercent/100;return{originalPrice:t,discountedPrice:Math.max(0,Math.round(o)),discountPercent:c.discountPercent,appliedPromotion:c}},t=(t,n)=>n&&0!==n.length?t.map((t=>{var i,r;const c=(null==(r=null==(i=t.variants)?void 0:i[0])?void 0:r.price)||0;if(0===c)return{...t,originalPrice:0,discountedPrice:0,discountPercent:0,hasDiscount:!1};const o=e(t.id,c,n);return{...t,originalPrice:o.originalPrice,discountedPrice:o.discountedPrice,discountPercent:o.discountPercent,appliedPromotion:o.appliedPromotion,hasDiscount:o.discountPercent>0}})):t;export{t as a,e as c};
